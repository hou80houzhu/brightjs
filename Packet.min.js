/*!
 * PacketJS JavaScript Library v0.12.2
 * http://packetjs.org/
 * Author hou80houzhu(WangJinliang)
 * licensed under the MIT licenses.
 * https://github.com/hou80houzhu/packet/blob/master/LICENSE
 */
(function(){var I=function(P){return new c(P)};var g=(function(){var P={kenel:[{n:"webkit",g:/applewebkit\/([\d.]+)/},{n:"gecko",g:/gecko\/([\d.]+)/},{n:"trident",g:/trident\/([\d.]+)/},{n:"edge",g:/edge\/([\d.]+)/}],info:[{n:"chrome",g:/chrome\/([\d.]+)/},{n:"mozilla",g:/mozilla\/([\d.]+)/},{n:"firefox",g:/firefox\/([\d.]+)/},{n:"msie",g:/msie ([\d.]+)/},{n:"opera",g:/opera\/([\d.]+)/},{n:"safari",g:/safari\/([\d.]+)/},{n:"blackberry",g:/blackberry ([\d.]+)/},{n:"blackberry",g:/edge ([\d.]+)/}],os:[{n:"windows",g:/windows ([a-z\d. ]+)/},{n:"osx",g:/mac os x ([a-z\d. ]+)/},{n:"ios",g:/os ([a-z\d. _]+)/},{n:"linux",g:/linux ([a-z\d. _]+)/},{n:"linux",g:/linux/},{n:"blackberry",g:/blackberry ([a-z\d. ]+)/},{n:"blackberry",g:/bb[0-9]+/},{n:"windowsphone",g:/windows phone/}],mobile:[{n:"android",g:/android ([\d.]+)/},{n:"iphone",g:/iphone/},{n:"ipad",g:/ipad/},{n:"blackberry",g:/bb[0-9]+/},{n:"blackberry",g:/blackberry/},{n:"windowsphone",g:/iemobile/}]},Q=window.navigator.userAgent.toLowerCase(),S={};for(var R in P){var W=false;for(var X in P[R]){var U=P[R][X],T=Q.match(U.g);if(T){var V=T[0].match(/[0-9._]+/);S[R]={name:U.n,version:V?V[0]:"unknow"};W=true;break}}if(!W){S[R]={name:"unknow",version:"unknow"}}}if(S.kenel&&S.kenel.name==="trident"&&S.kenel.version==="7.0"){S.info={name:"msie",version:"11"}}S.name=function(){return S.info.name};S.version=function(){return S.info.verison};S.isMobile=function(){return this.mobile.name!=="unknow"};S.isAndroid=function(Y){if(arguments.length===0){return this.mobile.name==="android"}else{return this.mobile.name==="android"&&parseInt(this.mobile.version)===parseInt(Y)}};S.isIos=function(Y){if(arguments.length===0){return this.mobile.name==="iphone"||this.mobile.name==="ipad"}else{return(this.mobile.name==="iphone"||this.mobile.name==="ipad")&&parseInt(this.mobile.version)===parseInt(Y)}};S.isWebkit=function(Y){if(arguments.length===0){return this.kenel.name==="webkit"}else{return this.kenel.name==="webkit"&&parseInt(this.kenel.version)===parseInt(Y)}};S.isGecko=function(Y){if(arguments.length===0){return this.kenel.name==="gecko"}else{return this.kenel.name==="gecko"&&parseInt(this.kenel.version)===parseInt(Y)}};S.isTrident=function(){return this.kenel.name==="trident"};S.isEdge=function(){return this.kenel.name==="edge"};S.isIe=function(Y){if(arguments.length===0){return this.info.name==="msie"}else{return this.info.name==="msie"&&parseInt(this.info.version)===parseInt(Y)}};S.isSupport=function(){return this.kenel.name==="webkit"||this.kenel.name==="gecko"||(this.kenel.name==="trident"&&this.kenel.version/1>=6)};return S})();var v={isFunction:function(P){return(typeof P==="function")&&P.constructor===Function},isEmptyObject:function(Q){for(var P in Q){return false}return true},isUndefined:function(P){return P===undefined},isWindow:function(P){return P!==undefined&&P!==null&&P===P.window},isDocument:function(P){return P!==null&&P.nodeType===P.DOCUMENT_NODE},isObject:function(P){return typeof(P)==="object"&&Object.prototype.toString.call(P).toLowerCase()==="[object object]"&&!P.length},isString:function(P){return(typeof P==="string")&&P.constructor===String},isNumber:function(P){return typeof P==="number"},isNumeric:function(P){return !isNaN(parseFloat(P))&&isFinite(P)},isAvalid:function(P){return P!==null&&P!==undefined},isArray:function(P){return Object.prototype.toString.call(P)==="[object Array]"},isQueryString:function(P){return v.isString(P)&&/(^|&).*=([^&]*)(&|$)/.test(P)},isElement:function(P){return P&&P.nodeType===1&&P.nodeName}};var i={postData:function(S){if(S){if(S instanceof FormData||S instanceof Blob||S instanceof ArrayBuffer){return S}else{if(v.isObject(S)){var P=false;for(var R in S){if(S[R] instanceof Blob||S[R] instanceof ArrayBuffer||S[R] instanceof File){P=true;break}}if(P){var Q=new FormData();for(var R in S){if(S[R] instanceof Blob){Q.append(R,S[R])}else{if(S[R] instanceof File){Q.append(R,S[R])}else{if(v.isArray(S[R])||v.isObject(S[R])){Q.append(R,window.encodeURIComponent(H.stringify(S[R])))}else{if(S[R] instanceof FormData){}else{Q.append(R,window.encodeURIComponent(S[R].toString()))}}}}}return Q}else{return i.queryString(S)}}else{if(v.isArray(S)){return window.encodeURIComponent(H.stringify({key:S}))}else{return S}}}}else{return null}},queryString:function(R){var P="";if(R){for(var Q in R){var S=R[Q];if(v.isString(S)){P+=Q+"="+window.encodeURIComponent(S)+"&"}else{if(v.isObject(S)||v.isArray(S)){P+=Q+"="+window.encodeURIComponent(H.stringify(S))+"&"}else{if(S instanceof FormData||S instanceof Blob||S instanceof File||S instanceof ArrayBuffer){}else{P+=Q+"="+(S!==undefined&&S!==null?window.encodeURIComponent(S.toString()):"")+"&"}}}}return P.length>0?P.substring(0,P.length-1):""}else{return""}},getURLInfo:function(V){var X=V.indexOf("?"),W=V.indexOf("#"),Y="",ac="",Z=null,ae=null,ad=V,Q=null,ab=null;if(X!==-1&&W!==-1){ad=V.substring(0,X);if(X>W){ac=V.substring(W+1,X);Y=V.substring(X+1)}else{Y=V.substring(X+1,W);ac=V.substring(W+1)}}else{if(X!==-1){Y=V.substring(X+1);ad=V.substring(0,X)}else{if(W!==-1){ac=V.substring(W+1);ad=V.substring(0,W)}}}var aa=V.match(/:[0-9]+/g),P=V.match(/[a-z]+:\/\//);Q=aa?aa[aa.length-1].substring(1):null;ab=P?P[0].substring(0,P[0].length-3):null;if(ab){ad=ad.substring(ab.length+3)}if(Q){ad=ad.substring(0,ad.length-Q.length-1)}var U=ad.substring(0,ad.indexOf("/"));ad=U===""?ad:U;if(Y!==""){Z={};var T=Y.split("&");for(var R=0;R<T.length;R++){var S=T[R].split("=");Z[S[0]]=S[1]}}if(ac!==""){ae={};var T=ac.split("&");for(var R=0;R<T.length;R++){var S=T[R].split("=");ae[S[0]]=S[1]}}return{query:Z,hash:ae,host:ad,port:Q,protocol:ab}},queryObject:function(P){return i.getURLInfo(P).query},hashObject:function(P){return i.getURLInfo(P).hash}};var H={parse:function(P){return window.JSON.parse(P)},stringify:function(P){return window.JSON.stringify(P)},each:function(R,T){var Q,S=0,U=R.length,P=U===undefined||v.isFunction(R);if(P){for(Q in R){if(T.call(R[Q],Q,R[Q])===false){break}}}else{while(S<U){if(T.call(R[S],S,R[S++])===false){break}}}return R},clone:function(R){var P;if(v.isArray(R)){P=[];for(var Q=0;Q<R.length;Q++){P[Q]=H.clone(R[Q])}return P}else{if(v.isObject(R)){P={};for(var Q in R){P[Q]=H.clone(R[Q])}return P}else{return R}}},cover:function(){var T,X,S,W,Q,V,Y=arguments[0]||{},U=1,R=arguments.length,P=false;if(typeof Y==="boolean"){P=Y;Y=arguments[1]||{};U=2}if(typeof Y!=="object"&&!v.isFunction(Y)){Y={}}if(R===U){Y=this;U=U-1}while(U<R){T=arguments[U];if(T!==null){for(X in T){S=Y[X];W=T[X];if(Y===W){continue}Q=v.isArray(W);if(P&&W&&(v.isObject(W)||Q)){if(Q){Q=false;V=S&&v.isArray(S)?S:[]}else{V=S&&v.isObject(S)?S:{}}Y[X]=H.cover(P,V,W)}else{if(W!==undefined){Y[X]=W}}}}U++}return Y}};var D=(function(){var P={};if(g.isWebkit()){P.prefix="-webkit-";P.transitionEnd="webkitTransitionEnd"}else{if(g.isGecko()==="gecko"){P.prefix="-moz-";P.transitionEnd="transitionend"}else{P.prefix="";P.transitionEnd="transitionend"}}P.fix=function(T){var U=/^-all-/;if(v.isString(T)){return T.replace(U,this.prefix)}else{if(v.isArray(T)){var R=[];for(var S=0;S<T.length;S++){R.push(T[S].replace(U,this.prefix))}return R}else{if(v.isObject(T)){var Q={};for(var S in T){Q[S.replace(U,this.prefix)]=v.isString(T[S])?T[S].replace(U,this.prefix):T[S]}return Q}else{return T}}}};return P})();var l={uuid:function(){var T="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),R=new Array(36),Q=0,S;for(var P=0;P<36;P++){if(P===8||P===13||P===18||P===23){R[P]="-"}else{if(P===14){R[P]="4"}else{if(Q<=2){Q=33554432+(Math.random()*16777216)|0}S=Q&15;Q=Q>>4;R[P]=T[(P===19)?(S&3)|8:S]}}}return R.join("")},getDatasetName:function(P){var R="";for(var Q=0;Q<P.length;Q++){if(/^[A-Z]+$/.test(P.charAt(Q))){R+="-"+P.charAt(Q).toLowerCase()}else{R+=P.charAt(Q)}}return"data-"+R},getDatasetReserve:function(P){return P.substring(4).replace(/-[a-zA-Z]{1}/g,function(Q){return Q[1].toUpperCase()})}};I.json=H,I.is=v,I.browser=g,I.prefix=D,I.util=l;I.serialize=i,I.extend=I.json.cover,I.nfn=function(){};var k=function(){this.list=[];this.length=null;this.current=null;this.state="init";this._start=null;this._progress=null;this._complete=null;this.result=null};k.prototype.add=function(Q,P,R){if(this.state==="init"){this.list.push({fn:Q,parameter:R,error:P||null})}else{throw Error("[Packet]-this queue can not add task when it is not in state of init.")}return this};k.prototype.next=function(P){this._progress&&this._progress.call(this,{total:this.length,runed:this.length-this.list.length,data:P});k._fire.call(this,P);return this};k.prototype.left=function(){return this.list.length};k.prototype.total=function(){return this.length};k.prototype.run=function(P){if(this.length===null){this._start&&this._start.call(this);this.length=this.list.length}this.state="running";k._fire.call(this,P)};k.prototype.stop=function(){if(this.state==="running"){this.state="stop"}return this};k.prototype.reset=function(){this.length===null;this.state="init";this.result=null;return this};k.prototype.clean=function(){this.list.length=0;this.state="end";this.length=0;this.reuslt=null;return this};k.prototype.isRunning=function(){return this.state==="running"};k.prototype.isEnd=function(){return this.state==="end"};k.prototype.isStop=function(){return this.state==="stop"};k.prototype.start=function(P){P&&(this._start=P);return this};k.prototype.progress=function(P){P&&(this._progress=P);return this};k.prototype.complete=function(P){P&&(this._complete=P);if(this.state==="end"){this._complete.call(this,this.result)}return this};k._fire=function(P){if(this.list.length>0){var Q=this.list.shift(),R=this;this.current=Q;try{Q.fn&&Q.fn.call(R,P,Q.parameter)}catch(S){k.error.call(this,P,S);this.next(P)}}else{this.state="end";this.result=P;this._complete&&this._complete.call(this,P)}return this};k.error=function(P,Q){if(this.current){this.current.error&&this.current.error.call(this,P,Q,this.current.parameter)}};I.queue=function(){return new k()};var A=function(){this.state="waiting";this.__list__=[];this.result=null;this.current=null;this._complete=null;this._notify=null;this.waits=1;this._completeTimes=0;this._handleTimes=0};A.prototype.add=function(Q,P,R){this.__list__.push({fn:Q,error:P,parameters:R});if(this.state==="waiting"){if(this.__list__.length===this.waits){A._fire.call(this,this.result)}}return this};A.prototype.size=function(){return this.__list__.length};A.prototype.wait=function(P){if(arguments.length===0||P===0){P=10000000}this.waits=P;return this};A.prototype.work=function(P){if(this.state==="waiting"){this.waits=1;A.next.call(this,P)}return this};A.prototype.delay=function(P){this.add(function(R){var Q=this;setTimeout(function(){Q.next(R)},P)});return this};A.prototype.notify=function(P){P&&(this._notify=P);return this};A.prototype.complete=function(P){P&&(this._complete=P);return this};A.prototype.isRunning=function(){return this.state==="running"};A.prototype.isWaiting=function(){return this.state==="waiting"};A.prototype.isHandleAtOnce=function(){if(this.state==="running"&&this.__list__.length>0){return false}else{return true}};A.prototype.completeTimes=function(){return this._completeTimes};A.prototype.handleTimes=function(){return this._handleTimes};A.prototype.clean=function(){this.__list__.length=0;this.state="waiting";for(var P in this){this[P]=null}};A.prototype.next=function(P){A.next.call(this,P);return this};A.prototype.error=function(P){return A.error.call(this,P)};A.next=function(P){this._notify&&this._notify.call(this,P);A._fire.call(this,P);return this};A.error=function(P){if(this.current){this.current.error&&this.current.error(this,P)}return this};A._fire=function(P){if(this.__list__.length>0){this.state="running";this._handleTimes=this._handleTimes+1;var Q=this.__list__.shift(),R=this;this.current=Q;try{Q.fn&&Q.fn.call(R,P,Q.parameters)}catch(S){A.error.call(S);A.next.call(R,P)}}else{if(this.state==="running"){this.result=P;this.state="waiting";this._completeTimes=this._completeTimes+1;this.current=null}this._complete&&this._complete.call(this,P)}return this};I.dynamicQueue=function(){return new A()};var E=function(Q){this.state=0;this.queue=new A();this._finally=null;this._notify=null;this._complete=null;this._result=null;this._scope=null;var P=this;this.queue.complete(function(S){P._result=S;var R=P._finally&&P._finally.call(P,S);if(R instanceof E){R.complete(function(T){P._result=T;P._complete&&P._complete.call(P,T)})}else{P._complete&&P._complete.call(P,S)}}).notify(function(R){P._notify&&P._notify(R)});if(v.isFunction(Q)){this.queue.wait();this.done(function(R){return R});Q(function(R){P.resolve(R)},function(R){P.reject(R)})}else{if(Q){this._result=Q;this.state=1;this.queue.add(function(){this.next(Q)})}else{this.queue.wait();this.done(function(R){return R})}}};E.prototype.scope=function(P){if(arguments.length===1){this._scope=P;return this}else{return this._scope}};E.prototype.then=function(Q,P){E.add.call(this,Q,1);E.add.call(this,P,2);return this};E.prototype.wait=function(P){this.queue.add(function(R){var Q=this;P.call(Q,function(S){Q.next(S)},R)});return this};E.prototype.done=function(P){E.add.call(this,P,1);return this};E.prototype.fail=function(P){E.add.call(this,P,2);return this};E.prototype.always=function(P){v.isFunction(P)&&(this._finally=P);return this};E.prototype.reject=function(P){this.state=2;this.queue.work(P);return this};E.prototype.resolve=function(P){this.state=1;this.queue.work(P);return this};E.prototype.notify=function(P){v.isFunction(P)&&(this._notify=P);return this};E.prototype.complete=function(P){v.isFunction(P)&&(this._complete=P);return this};E.prototype.delay=function(P){this.queue.delay(P);return this};E.prototype.clean=function(){this.queue.clean();for(var P in this){this[P]=null}};E.add=function(P,Q){var R=this;if(P&&v.isFunction(P)){this.queue.add(function(T){var S=this;setTimeout(function(){if(R.state===Q){var U;if(R._scope){U=P&&P.call(R._scope,T)}else{U=P&&P(T)}if(U instanceof E){U.complete(function(V){S.next(V)})}else{S.next(U)}}else{S.next(T)}},0)})}};I.promise=function(P){return new E(P)};I.all=function(){var S=$.promise();if(arguments.length>0){var P=Array.prototype.slice.call(arguments);var R=P.length;for(var Q=0;Q<P.length;Q++){P[Q].complete(function(){if(this.isResolve){R=R-1;if(R===0){S.resolve()}}})}}return S};I.any=function(){var T=$.promise();if(arguments.length>0){var Q=Array.prototype.slice.call(arguments);var S=Q.length,P=false;for(var R=0;R<Q.length;R++){Q[R].complete(function(){S=S-1;if(this.isResolve){P=true}if(S===0&&P){T.resolve()}})}}return T};var c=function(P){this.nodes=[];this.length=0;if(arguments.length===1&&v.isAvalid(P)){if(v.isString(P)){if(c.util.isHTML(P)){this.nodes=c.util.parseHTML(P)}else{this.nodes=c.util.query(window.document,P)}this.length=this.nodes.length}else{if(P instanceof M){this.nodes=P.nodes;this.length=P.length}else{if(v.isWindow(P)||v.isDocument(P)){return new N(P)}else{if(P.nodeType===1){this.nodes=[P];this.length=1}else{this.nodes=[];this.length=0}}}}}else{if(arguments.length===0){this.nodes=[];this.length=0}}};c.regs={root:/^(?:body|html)$/i,_class:/^\.([\w-]+)$/,_id:/^#([\w-]*)$/,_tag:/^[\w-]+$/,_html:/^\s*<(\w+|!)[^>]*>/,_tagName:/<([\w:]+)/,_property:/-+(.)?/g};c.util={getDom:function(Q){var P=new c();if(arguments.length===1){P.nodes=Q;P.length=Q.length}else{P.nodes=[];P.length=0}return P},isClass:function(P){return c.regs._class.test(P)},isId:function(P){return c.regs._id.test(P)},isTag:function(P){return c.regs._tag.test(P)},isHTML:function(P){return c.regs._html.test(P)},query:function(T,P){var Q=null;switch(true){case this.isId(P):var S=document.getElementById(P.substring(1,P.length));Q=S?[S]:[];break;case this.isClass(P):var R=T.getElementsByClassName(P.substring(1,P.length));Q=Array.prototype.slice.call(R);break;case this.isTag(P):var R=T.getElementsByTagName(P);Q=Array.prototype.slice.call(R);break;default:Q=Array.prototype.slice.call(T.querySelectorAll(P));break}return Q},queryChild:function(R,P){var S=R.getAttribute("id")||"__Packet__";R.setAttribute("id",S);var Q=c.util.query(R,"#"+S+">"+P);if(S==="__Packet__"){R.removeAttribute("id")}return Q},repairTags:{area:{l:1,s:"<map>",e:""},param:{l:1,s:"<object>",e:""},col:{l:2,s:"<table><tbody></tbody><colgroup>",e:"</table>"},legend:{l:1,s:"<fieldset>"},option:{l:1,s:"<select multiple='multiple'>",e:""},thead:{l:1,s:"<table>",e:"</table>"},tr:{l:2,s:"<table><tbody>",e:""},td:{l:3,s:"<table><tbody><tr>",e:""},_general:{s:"",e:"",l:0}},parseHTML:function(S){var P=S.match(c.regs._tagName),T=c.util.repairTags[(P?P[1]:"_general")]||c.util.repairTags._general;var U=document.createElement("DIV");U.innerHTML=T.s+S+T.e;var R=U;for(var Q=0;Q<T.l;Q++){R=R.firstChild}return Array.prototype.slice.call(R.childNodes)},parseFlagment:function(S){var Q=c.util.parseHTML(S);var P=window.document.createDocumentFragment();for(var R in Q){P.appendChild(Q[R])}return P},propertyName:function(P){return P.replace(c.regs._property,function(R,S,Q){if(Q===0){return R.substring(1,2)}else{return S?S.toUpperCase():""}})},cleanNode:function(R){if(R){if(R.datasets){for(var Q in R.datasets){var T=R.datasets[Q];if(T&&T.clean){T.clean()}R.datasets[Q]=null}R.datasets=null}O.util.unbindnode(R);var V=R.getElementsByClassName("incache");for(var U in V){if(V[U].nodeType){for(var P in V[U].datasets){var S=V[U].datasets[P];if(S&&S.clean){S.clean()}V[U].datasets[P]=null}V[U].datasets=null;O.util.unbindnode(V[U])}}}},supported:function(P){if(arguments.length===1){return v.isString(P)||P instanceof c||v.isWindow(P)||v.isDocument(P)||P.nodeType===1}else{return false}}};var m=function(P){this.dom=P;this.mapping={};m.init.call(this);this.dom.get(0).addEventListener(D.transitionEnd,m.fn,false);this.dom.data("_transition_",this)};m.fn=function(R){var Q=$(R.currentTarget).data("_transition_");var P=R.propertyName;if(Q.mapping[P]){if(Q.mapping[P].promise){Q.mapping[P].promise.resolve()}}else{if(Q.mapping[D.prefix+P]){if(Q.mapping[D.prefix+P].promise){Q.mapping[D.prefix+P].promise.resolve()}}else{if(Q.mapping.all){if(Q.mapping.all.promise){Q.mapping.all.promise.resolve()}}}}};m.setCss=function(){var Q="";for(var P in this.mapping){if(this.mapping[P]){Q+=P+" "+this.mapping[P].time+"ms "+this.mapping[P].type+" "+this.mapping[P].delay+"ms,"}}if(Q.length>0){Q=Q.substring(0,Q.length-1)}else{Q="none"}this.dom.css(D.prefix+"transition",Q)};m.init=function(){var R=this.dom.css("-all-transition-timing-function").split(",");var P=this.dom.css("-all-transition-delay").split(",");var S=this.dom.css("-all-transition-duration").split(",");var T=this.dom.css("-all-transition-property").split(",");for(var Q=0;Q<T.length;Q++){if(T[Q]!=="all"){this.mapping[T[Q]]={property:T[Q],time:parseFloat(S[Q])*1000,type:R[Q],delay:parseFloat(P[Q])*1000,fn:null}}}};m.prototype.set=function(S,U){var T={time:200,type:"ease-out",delay:0};var Q=new E();Q.scope(this.dom);I.extend(T,U);var P=D.fix(S.split(","));for(var R=0;R<P.length;R++){var V=P[R];if(V!=="all"){this.mapping[V]={property:V,time:T.time,type:T.type,delay:T.delay,promise:Q}}else{this.mapping={all:{property:V,time:T.time,type:T.type,delay:T.delay,promise:Q}};break}}m.setCss.call(this);return Q};m.prototype.all=function(R){var Q={time:200,type:"ease-out",delay:0};var P=new E();P.scope(this.dom);I.extend(Q,R);this.mapping={all:{property:"all",time:Q.time,type:Q.type,delay:Q.delay,promise:P}};m.setCss.call(this);return P};m.prototype.get=function(Q){var P=this.mapping[D.fix(Q)];if(P){return{type:P.type,time:P.time,delay:P.delay,property:Q}}return P};m.prototype.remove=function(R){var P=D.fix(R.split(","));for(var Q=0;Q<P.length;Q++){this.mapping[P[Q]]&&(this.mapping[P[Q]]=null)}m.setCss.call(this);return this};m.prototype.removeAll=function(){this.mapping={};m.setCss.call(this);return this};m.prototype.scope=function(){return this.dom};m.prototype.clean=function(){this.dom.get(0).removeEventListener(D.transitionEnd,m.fn,false);for(var P in this){this[P]=null}};var w=function(P){this.dom=P;this.attrs=[];this.setter=[];w.defaultValue.call(this);P.data("_transform_",this)};w.parse=function(){var Q=this.dom.css(D.prefix+"transform");var P=Q.match(/(-?[0-9\.]+)/g);if(P){if(P.length>6){P.shift()}for(var R=0;R<P.length;R++){P[R]=P[R]/1}}else{P=[1,0,0,1,0,0]}return P};w.defaultValue=function(){var af={translate:[0,0],translate3d:[0,0,0],translateX:0,translateY:0,translateZ:0,rotate:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:[0,0,0,1],scale:[1,1],scaleX:1,scaleY:1,scaleZ:1,scale3d:[1,1,1],skew:[0,0],skewX:0,skewY:0};var V=w.parse.call(this);if(V){if(V[0]!==1){var ab=this.dom.get(0),Y=ab.style.webkitTransform||ab.style.mozTransform||ab.style.msTransform||ab.style.transform;if(Y||Y===""){var X=document.styleSheets;ab.matches=ab.matches||ab.webkitMatchesSelector||ab.mozMatchesSelector||ab.msMatchesSelector;for(var W=0;W<X.length;W++){var ae=X[W].cssRules||X[W].rules;for(var P=0;P<ae.length;P++){if(ab.matches(ae[P].selectorText)){Y=ae[P].style.webkitTransform||ae[P].style.mozTransform||ae[P].style.msTransform||ae[P].style.transform}}}}if(Y&&Y!==""){var aa=[],ad=[],Q="",ac="",T=true;for(var W=0;W<Y.length;W++){var Z=Y[W];if(Z!=="("&&Z!==")"){if(T){Q+=Z}else{ac+=Z}}else{if(Z==="("){aa.push(Q.trim());Q="";T=false}else{if(Z===")"){ad.push(ac.trim());ac="";T=true}}}}for(var W=0;W<aa.length;W++){var S="";if(ad[W].indexOf(",")!==-1){var R=ad[W].split(",");for(var U=0;U<R.length;U++){R[U]=parseFloat(R[U])}S=R}else{S=parseFloat(ad[W])}af[aa[W]]=S}}}if(V.length===6){af.translate3d=[V[4],V[5],0];af.translateX=V[4];af.translateY=V[5]}else{af.translate3d=[V[12],V[13],V[14]];af.translateX=V[12];af.translateY=V[13];af.translateZ=V[14]}}this.values=af};w.watcher={translate:function(){return"translate3d("+(v.isNumber(this.values.translate3d[0])?this.values.translate3d[0]+"px":this.values.translate3d[0])+","+(v.isNumber(this.values.translate3d[1])?this.values.translate3d[1]+"px":this.values.translate3d[1])+","+(v.isNumber(this.values.translate3d[2])?this.values.translate3d[2]+"px":this.values.translate3d[2])+")"},rotate3d:function(){var P=this.values.rotate3d.join("")!=="0000"?"rotate3d("+this.values.rotate3d[0]+","+this.values.rotate3d[1]+","+this.values.rotate3d[2]+","+this.values.rotate3d[3]+"deg)":"";P+=(this.values.rotateX!==0?" rotateX("+this.values.rotateX+"deg)":"");P+=(this.values.rotateY!==0?" rotateY("+this.values.rotateY+"deg)":"");P+=(this.values.rotateZ!==0?" rotateZ("+this.values.rotateZ+"deg)":"");return P},scale3d:function(){var P=this.values.scale3d.join("")!=="111"?"scale3d("+this.values.scale3d[0]+","+this.values.scale3d[1]+","+this.values.scale3d[2]+")":"";P+=this.values.scaleX!==1?" scaleX("+this.values.scaleX+")":"";P+=this.values.scaleY!==1?" scaleY("+this.values.scaleY+")":"";P+=this.values.scaleZ!==1?" scaleZ("+this.values.scaleZ+")":"";return P},scale:function(){return this.values.scale.join("")!=="11"?"scale("+this.values.scale[0]+","+this.values.scale[1]+")":""},skew:function(){return this.values.skew.join("")!=="00"?"skew("+this.values.skew[0]+"deg,"+this.values.skew[1]+"deg)":""},rotate:function(){return this.values.rotate!==0?"rotate("+this.values.rotate+"deg)":""}};w.watch=function(P){if(this.attrs.indexOf(P)===-1){if(w.watcher[P]){this.attrs.push(P);this.setter.push(w.watcher[P])}}};w.watchName=function(P){if(P.indexOf("translate")!==-1){return"translate"}else{if(P.indexOf("skew")!==-1){return"skew"}else{if(P.indexOf("rotate")!==-1){if(P==="rotate3d"){return"rotate3d"}else{return"rotate"}}else{if(P.indexOf("scale")!==-1){if(P==="scale3d"){return"scale3d"}else{return"rotate"}}else{return""}}}}};w.set=function(){var Q="";for(var P in this.setter){Q+=this.setter[P].call(this)+" "}this.dom.css(D.prefix+"transform",Q)};w.translate=function(R,Q,P){if(arguments.length===2){var S=this.values.translate3d[R];if(/^[-0-9\.]*$/.test(S)===false){w.defaultValue.call(this)}return this.values.translate3d[R]}else{this.values.translate3d[R]=P;this.values.translate[R]=P;this.values[Q]=P;w.set.call(this);return this}};w.sett=function(Q,P,R){if(arguments.length===2){return this.values[Q]}else{(R===undefined||R===null)&&(R=P);this.values[Q]=R;w.set.call(this);return this}};w.prototype.matrix=function(){return w.parse.call(this)};w.prototype.sets=function(P){for(var Q in P){if(this.values[Q]!==undefined){this.values[Q]=P[Q];w.watch.call(this,w.watchName(Q))}}w.set.call(this);return this};w.prototype.scale=function(P,Q){w.watch.call(this,"scale");if(arguments.length===0){return this.values.scale}else{(P===undefined||P===null)&&(P=1),(Q===undefined||Q===null)&&(Q=1);this.values.scale[0]=P;this.values.scale[1]=Q;w.set.call(this);return this}};w.prototype.rotate=function(P){w.watch.call(this,"rotate");if(arguments.length===0){return this.values.rotate}else{(P===undefined||P===null)&&(P=0);this.values.rotate=P;w.set.call(this);return this}};w.prototype.scale3d=function(P,R,Q){w.watch.call(this,"scale3d");if(arguments.length===0){return this.values.scale3d}else{(P===undefined||P===null)&&(P=1),(R===undefined||R===null)&&(R=1),(Q===undefined||Q===null)&&(Q=1);this.values.scale3d[0]=P;this.values.scale3d[1]=R;this.values.scale3d[2]=Q;w.set.call(this);return this}};w.prototype.rotate3d=function(P,S,R,Q){w.watch.call(this,"rotate3d");if(arguments.length===0){return this.values.rotate3d}else{(P===undefined||P===null)&&(P=0),(S===undefined||S===null)&&(S=0),(R===undefined||R===null)&&(R=0),(Q===undefined||Q===null)&&(Q=0);this.values.rotate3d[0]=P;this.values.rotate3d[1]=S;this.values.rotate3d[2]=R;this.values.rotate3d[3]=Q;w.set.call(this);return this}};w.prototype.skew=function(P,Q){w.watch.call(this,"skew");if(arguments.length===0){return this.values.skew}else{(P===undefined||P===null)&&(P=1),(Q===undefined||Q===null)&&(Q=1);this.values.skew[0]=P;this.values.skew[1]=Q;w.set.call(this);return this}};w.prototype.x=function(P){w.watch.call(this,"translate");return w.translate.apply(this,arguments.length===0?[0,"translateX"]:[0,"translateX",P])};w.prototype.y=function(P){w.watch.call(this,"translate");return w.translate.apply(this,arguments.length===0?[1,"translateY"]:[1,"translateY",P])};w.prototype.z=function(P){w.watch.call(this,"translate");return w.translate.apply(this,arguments.length===0?[2,"translateZ"]:[2,"translateZ",P])};w.prototype.scaleX=function(P){w.watch.call(this,"scale");return w.sett.apply(this,arguments.length===0?["scaleX",1,P]:["scaleX",1,P])};w.prototype.scaleY=function(P){w.watch.call(this,"scale");return w.sett.apply(this,arguments.length===0?["scaleY",1,P]:["scaleY",1,P])};w.prototype.scaleZ=function(P){w.watch.call(this,"scale");return w.sett.apply(this,arguments.length===0?["scaleZ",1,P]:["scaleZ",1,P])};w.prototype.rotateX=function(P){w.watch.call(this,"rotate");return w.sett.apply(this,arguments.length===0?["rotateX",0,P]:["rotateX",0,P])};w.prototype.rotateY=function(P){w.watch.call(this,"rotate");return w.sett.apply(this,arguments.length===0?["rotateY",0,P]:["rotateY",0,P])};w.prototype.rotateZ=function(P){w.watch.call(this,"rotate");return w.sett.apply(this,arguments.length===0?["rotateZ",0,P]:["rotateZ",0,P])};w.prototype.skewX=function(P){w.watch.call(this,"skew");return w.sett.apply(this,arguments.length===0?["skewX",0,P]:["skewX",0,P])};w.prototype.skewY=function(P){w.watch.call(this,"skew");return w.sett.apply(this,arguments.length===0?["skewY",0,P]:["skewY",0,P])};w.prototype.origin=function(Q,P){if(arguments.length===0){var Q=this.dom.css(D.prefix+"transform-origin").split(" ");return{x:Q[0],y:Q[1]}}else{if(arguments.length===2){return this.dom.css(D.prefix+"transform-origin",Q+" "+P)}}};w.prototype.style=function(P){if(arguments.length===0){return this.dom.css(D.prefix+"transform-style")}else{this.dom.css(D.prefix+"transform-style",P);return this}};w.prototype.perspective=function(P){if(arguments.length===0){return this.dom.css(D.prefix+"perspective")}else{this.dom.css(D.prefix+"perspective",P);return this}};w.prototype.perspectiveOrigin=function(){if(arguments.length===0){var P=this.dom.css(D.prefix+"perspective-origin").split(" ");return{x:P[0],y:P[1]}}else{if(arguments.length===2){return this.dom.css(D.prefix+"perspective-origin",P+" "+b)}}};w.prototype.backface=function(){if(arguments.length===0){return this.dom.css(D.prefix+"backface-visibility")}else{this.dom.css(D.prefix+"backface-visibility",a);return this}};w.prototype.clean=function(){for(var P in this){this[P]=null}};w.prototype.scope=function(){return this.dom};var M=function(){};M.prototype.get=function(P){P=P/1;if(v.isAvalid(P)&&P>=0&&P<this.nodes.length){return this.nodes[P]}else{return null}};M.prototype.ready=function(Q){var P=/complete|loaded|interactive/;if(P.test(window.document.readyState)){Q&&Q()}else{window.document.addEventListener("DOMContentLoaded",function(){Q&&Q()},false)}return this};M.prototype.find=function(P){var Q=[];if(!this.isEmpty()){if(v.isString(P)){Q=c.util.query(this.nodes[0],P)}}return c.util.getDom(Q)};M.prototype.children=function(P){var Q=[];if(!this.isEmpty()){if(v.isString(P)){Q=c.util.queryChild(this.nodes[0],P)}else{if(arguments.length===1&&P>=0){Q=this.nodes[0].children[P]?[this.nodes[0].children[P]]:[]}else{Q=Array.prototype.slice.call(this.nodes[0].children)}}}return c.util.getDom(Q)};M.prototype.siblings=function(P){var S=[];if(!this.isEmpty()){var Q=[];if(v.isString(P)&&this.nodes[0].parentNode){Q=c.util.queryChild(this.nodes[0].parentNode,P)}else{Q=this.nodes[0].parentNode?Array.prototype.slice.call(this.nodes[0].parentNode.children):[]}for(var R=0;R<Q.length;R++){if(Q[R]!==this.nodes[0]){S.push(Q[R])}}}return c.util.getDom(S)};M.prototype.has=function(P){var S=[];for(var R=0;R<this.nodes.length;R++){var Q=c.util.queryChild(this.nodes[R],P);if(Q.length>0){S.push(this.nodes[R])}}return c.util.getDom(S)};M.prototype.index=function(){var P=-1;if(!this.isEmpty()){var R=this.nodes[0].parentNode;for(var Q=0;Q<R.children.length;Q++){if(R.children[Q]===this.nodes[0]){P=Q;break}}}return P};M.prototype.filter=function(P){var S=[];if(!this.isEmpty()){var Q=c.util.query(window.document,P);if(Q.length>0){for(var R=0;R<this.nodes.length;R++){(Q.indexOf(this.nodes[R])!==-1)&&S.push(this.nodes[R])}}}return c.util.getDom(S)};M.prototype.first=function(){var P=[];if(!this.isEmpty()){P.push(this.get(0))}return c.util.getDom(P)};M.prototype.last=function(){var P=[];if(this.nodes.length>0){P.push(this.get(this.length-1))}return c.util.getDom(P)};M.prototype.parent=function(){var Q=arguments[0],R=[];if(!this.isEmpty()){if(v.isString(Q)){var T=c.util.query(window.document,Q);var P=this.nodes[0].parentNode;while(P&&!v.isDocument(P)){if(T.indexOf(P)!==-1){R.push(P)}P=P.parentNode}}else{if(v.isNumber(Q)&&Q>0){var P=this.nodes[0].parentNode,S=Q-1;while(P&&!v.isDocument(P)&&S>0){S--;P=P.parentNode}R.push(P)}else{this.nodes[0].parentNode&&R.push(this.nodes[0].parentNode)}}}return c.util.getDom(R)};M.prototype.parents=function(){var Q=arguments[0],R=[];if(!this.isEmpty()){var P=this.nodes[0].parentNode;while(P&&!v.isDocument(P)){R.push(P);P=P.parentNode}if(v.isString(Q)){var S=c.util.query(window.document,Q);R=R.filter(function(T){if(S.indexOf(T)!==-1){return true}})}}return c.util.getDom(R)};M.prototype.next=function(){var Q=[];if(!this.isEmpty()){var P=this.nodes[0].nextSibling;P&&Q.push(P)}return c.util.getDom(Q)};M.prototype.nexts=function(P){var S=[],R=this;if(!this.isEmpty()){var Q=this.nodes[0].nextSibling;while(Q){if(Q.nodeType===1){S.push(Q)}Q=Q.nextSibling}if(v.isString(P)&&this.nodes[0].parentNode){var T=c.util.queryChild(this.nodes[0].parentNode,P);S=S.filter(function(U){if(T.indexOf(U)!==-1&&U!==R.nodes[0]){return true}})}}return c.util.getDom(S)};M.prototype.prev=function(){var Q=[];if(!this.isEmpty()){var P=this.nodes[0].previousSibling;P&&Q.push(P)}return c.util.getDom(Q)};M.prototype.prevs=function(P){var S=[],R=this;if(!this.isEmpty()){var Q=this.nodes[0].previousSibling;while(Q){if(Q.nodeType===1){S.push(Q)}Q=Q.previousSibling}if(v.isString(P)&&this.nodes[0].parentNode){var T=c.util.queryChild(this.nodes[0].parentNode,P);S=S.filter(function(U){if(T.indexOf(U)!==-1&&U!==R.nodes[0]){return true}})}}return c.util.getDom(S)};M.prototype.eq=function(P){var Q=[];if(P>=0&&P<this.nodes.length){Q.push(this.nodes[P])}return c.util.getDom(Q)};M.prototype.each=function(Q){if(Q){for(var P=0;P<this.nodes.length;P++){if(Q.call(this.nodes[P],this.nodes[P],P,this.nodes)===false){break}}}return this};M.prototype.remove=function(){var Q=arguments[0];if(Q&&v.isNumber(Q)&&Q<this.nodes.length){var P=this.nodes[Q];if(P){c.util.cleanNode(P);P.parentNode.removeChild(P)}}else{if(v.isString(Q)){var S=c.util.query(window.document,Q);for(var R=0;R<this.nodes.length;R++){if(S.indexOf(this.nodes[R]!==-1)){this.nodes[R].parentNode&&this.nodes[R].parentNode.removeChild(this.nodes[R])}}}else{for(var R=0;R<this.nodes.length;R++){var P=this.nodes[R];if(P){c.util.cleanNode(P);P.parentNode&&P.parentNode.removeChild(P)}}}}return this};M.prototype.empty=function(){for(var Q=0;Q<this.nodes.length;Q++){var R=this.nodes[Q].children;for(var P=0;P<R.length;P++){R[P].nodeType&&c.util.cleanNode(R[P])}this.nodes[Q].innerHTML=""}};M.prototype.clean=function(){for(var P=0;P<=this.nodes.length;P++){c.util.cleanNode(this.nodes[P])}this.nodes=null;this.length=0};M.prototype.clone=function(){var P=[];if(!this.isEmpty()){P.push(this.nodes[0].cloneNode(true))}return c.util.getDom(P)};M.prototype.wrap=function(Q){for(var R=0;R<this.nodes.length;R++){var S=null;if(v.isString(Q)){S=c.util.parseHTML(Q)[0]||null}else{if(Q instanceof M){S=c.nodes[0]}else{if(Q.nodeType){S=Q}else{if(v.isFunction(Q)){var P=Q();v.isString(P)&&(S=c.util.parseHTML(Q)[0]||null)}}}}if(S){var T=this.nodes[R];if(T.parentNode){T.parentNode.replaceChild(S,T);S.appendChild(T)}}}return this};M.prototype.append=function(){var P=arguments[0];if(!this.isEmpty()){if(v.isString(P)){var Q=c.util.parseFlagment(P);for(var R=0;R<this.nodes.length;R++){this.nodes[R].appendChild(Q.cloneNode(true))}}else{if(P instanceof M){for(var R=0;R<this.nodes.length;R++){this.nodes[R].appendChild(P.nodes[0])}}else{if(P&&P.nodeType){for(var R=0;R<this.nodes.length;R++){this.nodes[R].appendChild(P)}}else{if(v.isFunction(P)){for(var R=0;R<this.nodes.length;R++){var S=P.call(this.nodes[R],R,this.nodes[R].innerHTML);c.util.isHTML(S)&&this.nodes[R].appendChild(c.util.parseFlagment(S))}}}}}}return this};M.prototype.appendTo=function(Q){if(!this.isEmpty()){if(v.isString(Q)){var P=c.util.query(window.document,Q);P.length>0&&P[0].appendChild(this.nodes[0])}else{if(Q instanceof M){Q.length>0&&Q.nodes[0].appendChild(this.nodes[0])}else{Q.appendChild(this.nodes[0])}}}return this};M.prototype.insertBefore=function(P){if(!this.isEmpty()){if(v.isString(P)){var Q=c.util.query(window.document,P)[0];Q&&Q.parentNode&&Q.parentNode.insertBefore(this.nodes[0],Q)}else{if(P instanceof M){!P.isEmpty()&&P.parent().get(0).insertBefore(this.nodes[0],P.get(0))}else{P.parentNode&&P.parentNode.insertBefore(this.nodes[0],P)}}}return this};M.prototype.insertAfter=function(P){if(!this.isEmpty()){var Q=null;if(v.isString(P)){var Q=c.util.query(window.document,P)[0]||null}else{if(P instanceof M){Q=P.nodes[0]||null}else{if(P.nodeType){Q=P}}}if(Q){if(Q.nextSibling){Q.parentNode.insertBefore(this.nodes[0],Q.nextSibling)}else{Q.parentNode.appendChild(this.nodes[0])}}}return this};M.prototype.prepend=function(){var P=arguments[0];if(!this.isEmpty()){if(v.isString(P)){var Q=c.util.parseFlagment(P);for(var R=0;R<this.nodes.length;R++){if(this.nodes[R].childNodes.length!==0){this.nodes[R].insertBefore(Q.cloneNode(true),this.nodes[R].firstChild)}else{this.nodes[R].appendChild(Q.cloneNode(true))}}}else{if(v.isFunction(P)){for(var R=0;R<this.nodes.length;R++){var S=P.call(this.nodes[R],R,this.nodes[R].innerHTML);if(c.util.isHTML(S)){if(this.nodes[R].childNodes.length>0){this.nodes[R].insertBefore(c.util.parseFlagment(S),this.nodes[R].firstChild)}else{this.nodes[R].appendChild(c.util.parseFlagment(S))}}}}}}return this};M.prototype.prependTo=function(Q){if(!this.isEmpty()){if(v.isString(Q)){var P=c.util.query(window.document,Q);if(P.length>0){if(P[0].childNodes.length>0){P[0].insertBefore(this.nodes[0],P[0].firstChild)}else{P[0].appendChild(this.nodes[0])}}}else{if(Q instanceof M){if(!Q.isEmpty()){if(Q.nodes[0].childNodes.length>0){Q.nodes[0].insertBefore(this.nodes[0],Q.nodes[0].firstChild)}else{Q.nodes[0].appendChild(this.nodes[0])}}}else{if(Q.nodeType===1){if(Q.children.length>0){Q.insertBefore(this.nodes[0],Q.firstChild)}else{Q.appendChild(this.nodes[0])}}}}}return this};M.prototype.before=function(P){if(!this.isEmpty()&&this.nodes[0].parentNode){if(v.isString(P)){var Q=c.util.parseFlagment(P);this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(Q,this.nodes[0])}else{if(P instanceof c){this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(P.nodes[0],this.nodes[0])}else{if(P.nodeType){this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(P,this.nodes[0])}}}}return this};M.prototype.after=function(P){if(!this.isEmpty()){var Q=null;if(v.isString(P)){Q=c.util.parseFlagment(P)}else{if(P instanceof M){Q=P.get(0)}else{if(P.nodeType){Q=P}}}if(this.nodes[0].nextSibling){this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(Q,this.nodes[0].nextSibling)}else{this.nodes[0].parentNode&&this.nodes[0].parentNode.appendChild(Q)}}return this};M.prototype.replaceWith=function(P){if(!this.isEmpty()){var Q=null;if(v.isString(P)){Q=c.util.query(window.document,P)[0]}else{if(P instanceof M){Q=P.nodes[0]}else{if(P.nodeType){Q=P}}}if(Q){Q.parentNode.replaceChild(this.nodes[0],Q)}}return this};M.prototype.equal=function(P){return this===P};M.prototype.same=function(P){var R=true;P=I(P);if(this.length===P.length){for(var Q=0;Q<this.nodes.length;Q++){if(P.nodes.indexOf(this.nodes[Q])===-1){R=false;break}}}else{R=false}return R};M.prototype.css=function(Q,P){var T=this;if(!this.isEmpty()){if(arguments.length===1&&v.isObject(Q)){Q=D.fix(Q);for(var S=0;S<this.nodes.length;S++){var U=this.nodes[S].style.cssText+";";for(var R in Q){U+=R+":"+Q[R]+";"}this.nodes[S].style.cssText=U}}else{if(arguments.length===1&&v.isString(Q)){Q=D.fix(Q);T=window.getComputedStyle(this.nodes[0],"").getPropertyValue(Q)}else{if(arguments.length===2){for(var S=0;S<this.nodes.length;S++){var V=D.fix(Q);this.nodes[S].style[c.util.propertyName(V)]=P}}}}}return T};M.prototype.attr=function(Q,P){var T=this;if(!this.isEmpty()){if(arguments.length===2){if(Q!==""){for(var S=0;S<this.nodes.length;S++){this.nodes[S].setAttribute(Q,P)}}}else{if(arguments.length===1){if(v.isObject(Q)){for(var R=0;R<this.nodes.length;R++){for(var S in Q){if(S!==""){this.nodes[R].setAttribute(S,Q[S])}}}}else{if(Q){T=this.nodes[0].getAttribute(Q)}}}}}return T};M.prototype.removeAttr=function(P){for(var Q=0;Q<this.nodes.length;Q++){this.nodes[Q].removeAttribute(P)}return this};M.prototype.data=function(Q,P){var S=null;if(!this.isEmpty()){if(arguments.length===1){if(!this.nodes[0].datasets){this.nodes[0].datasets={}}if(v.isString(Q)){if(this.nodes[0].datasets[Q]!==undefined&&this.nodes[0].datasets[Q]!==null){S=this.nodes[0].datasets[Q]}}else{if(v.isObject(Q)){I.extend(this.nodes[0].datasets,Q)}}}else{if(arguments.length===2){this.addClass("incache");for(var R=0;R<this.nodes.length;R++){if(!this.nodes[R].datasets){this.nodes[R].datasets={}}this.nodes[R].datasets[Q]=P}S=this}}}return S};M.prototype.removeData=function(P){if(!this.isEmpty()){if(arguments.length===1){this.data(P,null)}}return this};M.prototype.dataset=function(P,T){var S=this;if(this.nodes.length>0){if(arguments.length===1){if(v.isString(P)){if(this.nodes[0].dataset){S=this.nodes[0].dataset[P]}else{S=this.nodes[0].getAttribute(l.getDatasetName(P))}}else{if(v.isObject(P)){for(var R in P){if(this.nodes[0].dataset){this.nodes[0].dataset[R]=P[R]}else{this.nodes[0].setAttribute(l.getDatasetName(R),P[R])}}}}}else{if(arguments.length===2){for(var R=0;R<this.nodes.length;R++){if(this.nodes[0].dataset){this.nodes[R].dataset[P]=T}else{this.nodes[0].setAttribute(l.getDatasetName(P),T)}}}else{if(arguments.length===0){if(this.nodes[0].dataset){S=this.nodes[0].dataset}else{var Q=this.nodes[0].attrbutes;S={};for(var R=0;R<Q.length;Q++){if(Q[R].nodeName.indexOf("data-")===0){S[l.getDatasetReserve(Q[R].nodeName)]=Q[R].nodeValue}}}}}}}return S};M.prototype.create=function(P,Q){if(P){if(Q){this.nodes=[window.document.createElementNS(Q,P)]}else{this.nodes=[window.document.createElement(P)]}}else{this.nodes=[window.document.createDocumentFragment()]}this.length=this.nodes.length;return this};M.prototype.element=function(P,Q){if(P){if(Q){this.nodes=[window.document.createElementNS(Q,P)]}else{this.nodes=[window.document.createElement(P)]}}else{this.nodes=[window.document.createDocumentFragment()]}this.length=this.nodes.length;return this};M.prototype.width=function(P){if(arguments.length===1){if(v.isNumber(P)){P=P+"px"}this.css("width",P);return this}else{return this.nodes[0].offsetWidth}};M.prototype.height=function(P){if(arguments.length===1){if(v.isNumber(P)){P=P+"px"}this.css("height",P);return this}else{return this.nodes[0].offsetHeight}};M.prototype.offset=function(){if(!this.isEmpty()){var P=this.nodes[0].getBoundingClientRect();return{left:P.left+window.pageXOffset,top:P.top+window.pageYOffset,width:P.width,height:P.height}}else{return null}};M.prototype.hide=function(){for(var P=0;P<this.nodes.length;P++){var Q=window.getComputedStyle(this.nodes[P],"").getPropertyValue("display");if(Q!=="none"){this.nodes[P].setAttribute("ds",Q);this.nodes[P].style.display="none"}}return this};M.prototype.show=function(){for(var Q=0;Q<this.nodes.length;Q++){var R=window.getComputedStyle(this.nodes[Q],"").getPropertyValue("display");if(R==="none"){var P=this.nodes[Q].getAttribute("ds");if(P){this.nodes[Q].removeAttribute("ds");this.nodes[Q].style.display=P}else{this.nodes[Q].style.display="block"}}}return this};M.prototype.visible=function(P){for(var Q=0;Q<this.nodes.length;Q++){if(P){this.nodes[Q].style.visibility="visible"}else{this.nodes[Q].style.visibility="hidden"}}return this};M.prototype.html=function(P){var R=this;if(!this.isEmpty()){if(arguments.length===1){for(var Q=0;Q<this.nodes.length;Q++){this.nodes[Q].innerHTML=P}}else{R=this.nodes[0].innerHTML}}return R};M.prototype.outer=function(){if(!this.isEmpty()){return this.nodes[0].outerHTML}return""};M.prototype.text=function(R){var Q=this;if(!this.isEmpty()){if(arguments.length===1){for(var P=0;P<this.nodes.length;P++){this.nodes[P].innerText=R}}else{Q=this.nodes[0].innerText}}return Q};M.prototype.val=function(P){var R=this;if(!this.isEmpty()){if(arguments.length===1){for(var Q=0;Q<this.nodes.length;Q++){this.nodes[Q].value=P}}else{R=this.nodes[0].value}}return R};M.prototype.addClass=function(P){for(var Q=0;Q<this.nodes.length;Q++){if(this.nodes[Q].classList){this.nodes[Q].classList.add(P)}else{if(this.nodes[Q].className.indexOf(P)===-1){this.nodes[Q].className=this.nodes[Q].className+" "+P}}}return this};M.prototype.removeClass=function(P){for(var Q=0;Q<this.nodes.length;Q++){if(this.nodes[Q].classList){this.nodes[Q].classList.remove(P)}else{if(this.nodes[Q].className.indexOf(P)!==-1){var R=new RegExp("(\\s|^)"+P+"(\\s|$)");this.nodes[Q].className=this.nodes[Q].className.replace(R," ")}}}return this};M.prototype.contains=function(Q){if(!this.isEmpty()){var P=I(Q);if(!P.isEmpty()){return this.nodes[0].contains(P.nodes[0])}}return false};M.prototype.contain=function(P){return this.same(P)||this.contains(P)};M.prototype.hasClass=function(P){var Q=false;if(!this.isEmpty()){if(this.nodes[0].classList){Q=this.nodes[0].classList.contains(P)}else{Q=this.nodes[0].className.indexOf(P)===-1}}return Q};M.prototype.toggleClass=function(P){if(!this.isEmpty()){if(this.nodes[0].classList){this.nodes[0].classList.toggle(P)}else{if(this.nodes[0].className.indexOf(P)!==-1){var R=new RegExp("(\\s|^)"+P+"(\\s|$)");for(var Q=0;Q<this.nodes.length;Q++){this.nodes[Q].className=this.nodes[Q].className.replace(R," ")}}else{for(var Q=0;Q<this.nodes.length;Q++){this.nodes[Q].className=this.nodes[Q].className+" "+P}}}}return this};M.prototype.scrollTop=function(R){var P=this;if(arguments.length===0){if(!this.isEmpty()){P=(this.nodes[0]["scrollTop"]!==undefined)?this.nodes[0].scrollTop:this.nodes[0].scrollY}else{P=null}}else{for(var Q=0;Q<this.nodes.length;Q++){if(this.nodes[Q]["scrollTop"]!==undefined){this.nodes[Q].scrollTop=R}else{this.nodes[Q].scrollY=R}}}return P};M.prototype.scrollLeft=function(R){var P=this;if(arguments.length===0){if(!this.isEmpty()){P=(this.nodes[0]["scrollLeft"]!==undefined)?this.nodes[0].scrollLeft:this.nodes[0].scrollX}else{P=null}}else{for(var Q=0;Q<this.nodes.length;Q++){if(this.nodes[Q]["scrollLeft"]!==undefined){this.nodes[Q].scrollLeft=R}else{this.nodes[Q].scrollX=R}}}return P};M.prototype.click=function(P){if(arguments.length===1){this.bind("click",P)}else{this.trigger("click")}return this};M.prototype.load=function(P){if(arguments.length===1){this.bind("load",P)}else{this.trigger("load")}return this};M.prototype.trigger=function(P,Q){return O.util.trigger(this,P,Q)};M.prototype.bind=function(R,Q){if(v.isString(R)){return O.util.bind(this,R,Q)}else{if(v.isArray(R)){for(var P=0;P<R.length;P++){O.util.bind(this,R[P],Q)}return this}}};M.prototype.unbind=function(Q,P){return O.util.unbind(this,Q,P)};M.prototype.isEmpty=function(P){if(arguments.length===0){return this.nodes.length===0}else{if(v.isFunction(P)){P.call(this,this.nodes.length===0);return this}return this}};M.prototype.isWrapper=function(){return this instanceof M};M.prototype.add=function(P){var Q=I(P);this.nodes=this.nodes.concat(Q.nodes);this.length=this.nodes.length;return this};M.prototype.prop=function(P,R){for(var Q=0;Q<this.nodes.length;Q++){var S=this.nodes[Q][P];if(S!==undefined){if(v.isFunction(R)){this.nodes[Q][P]=R.call(this.nodes[Q],Q,S)}else{this.nodes[Q][P]=R}}}return this};M.prototype.position=function(Q,P){if(arguments.length===0){var Q=this.offsetParent();if(Q.length>0&&!v.isDocument(Q.get(0))){return{left:this.css("left"),top:this.css("top")}}else{return this.offset()}}else{Q&&this.css("left",Q);P&&this.css("top",P);return this}};M.prototype.offsetParent=function(){var Q=[];if(!this.isEmpty()){if(this.nodes[0].offsetParent===undefined){var P=this.nodes[0].parentNode;while(P&&!c.regs.root.test(P.nodeName)&&window.getComputedStyle(P,"").getPropertyValue("position")==="static"){P=P.parentNode}Q.push(P)}else{Q.push(this.nodes[0].offsetParent)}}return c.util.getDom(Q)};M.prototype.scrollingLeft=function(T,R,Q){var S=I.promise().scope(this),P=this;if(this.scrollLeft()!==T){new p({from:this.scrollLeft(),to:T,during:R,fn:Q,onrunning:function(U){P.scrollLeft(U)},onend:function(){S.resolve()}}).start()}else{S.resolve()}return S};M.prototype.scrollingTop=function(S,R,Q){var T=I.promise().scope(this),P=this;if(this.scrollTop()!==S){new p({from:this.scrollTop(),to:S,during:R,fn:Q,onrunning:function(U){P.scrollTop(U)},onend:function(){T.resolve()}}).start()}else{T.resolve()}return T};M.prototype.transition=function(){var P=this.data("_transition_");if(!P){P=new m(this)}return P};M.prototype.animate=function(Q,U){var S=this;var R=this.data("_animate_");var P={duration:350,delay:0,type:"ease-out"};I.extend(P,U);Q=D.fix(Q);var W="";for(var T in Q){W+=T+" "+P.duration+"ms "+P.type+" "+P.delay+"ms,"}if(W.length>0){W=W.substring(0,W.length-1)}if(!R){var X=I.promise().scope(S);var V=function(Y){S.get(0).removeEventListener(D.transitionEnd,V,false);X.resolve(Y)};S.css(D.prefix+"transition",W).get(0).addEventListener(D.transitionEnd,V,false);S.css(Q);S.data("_animate_",X);R=X}else{R.then(function(){var Z=I.promise().scope(S);var Y=function(aa){S.get(0).removeEventListener(D.transitionEnd,Y,false);Z.resolve(aa)};S.css(D.prefix+"transition",W).get(0).addEventListener(D.transitionEnd,Y,false);S.css(Q);return Z})}return R};M.prototype.transform=function(){var P=this.data("_transform_");if(!P){P=new w(this)}return P};M.prototype.isRemoved=function(){if(this.nodes[0]){return !window.document.contains(this.nodes[0])}else{return false}};M.prototype.mutationObserve=function(S,R){if(!this.isEmpty()){if(!this.nodes[0].datasets["-mutation-"]){var Q=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;var P=new Q(S);P.observe(this.nodes[0],R);this.nodes[0].datasets["-mutation-"]=P}}return this};M.prototype.unMutationObserve=function(){if(!this.isEmpty()){if(this.nodes[0].datasets["-mutation-"]){this.nodes[0].datasets["-mutation-"].disconnect();this.nodes[0].datasets["-mutation-"].takeRecord();this.nodes[0].datasets["-mutation-"]=null}}return this};M.prototype.finder=function(){if(!this.isEmpty()){return this.nodes[0].datasets&&this.nodes[0].datasets["-finder-"]?this.nodes[0].datasets["-finder-"]:null}else{return null}};M.prototype.group=function(){if(!this.isEmpty()){return this.nodes[0].datasets&&this.nodes[0].datasets["-groupitem-"]?this.nodes[0].datasets["-groupitem-"].group||null:null}else{return null}};M.prototype.items=function(P){var R=new c();if(!this.isEmpty()){if(this.nodes[0].datasets["-group-"]&&this.nodes[0].datasets["-group-"].items){if(arguments.length===1){if(this.nodes[0].datasets["-group-"].items[P]){R.add(this.nodes[0].datasets["-group-"].items[P])}}else{for(var Q in this.nodes[0].datasets["-group-"].items){R.add(this.nodes[0].datasets["-group-"].items[Q])}}}}return R};M.prototype.item=function(){if(!this.isEmpty()){return this.nodes[0].datasets&&this.nodes[0].datasets["-groupitem-"]?this.nodes[0].datasets["-groupitem-"]||null:null}else{return null}};M.prototype.cache=function(){if(!this.isEmpty()){if(arguments.length===0){return this.nodes[0].datasets["-cache-"]||null}else{if(this.nodes[0].datasets===undefined||this.nodes[0].datasets===null){this.nodes[0].datasets={};this.addClass("incache")}this.nodes[0].datasets["-cache-"]=arguments[0];return this}}else{return null}};M.prototype.getModule=function(){return this.data("-view-")};M.prototype.predefined=function(R){var P=Array.prototype.slice.call(arguments);var Q=M.prototype[P[0]];if(Q){P.splice(0,1);return Q.call(this,P)}else{return this}};c.prototype=new M();var N=function(P){this.obj=P};N.prototype.width=function(){return window.innerWidth};N.prototype.height=function(){return window.innerHeight};N.prototype.bind=function(Q,P){if(v.isWindow(this.obj)){window.addEventListener(Q,P,false)}else{this.nodes=[this.obj];O.util.bind(this,Q,P)}return this};N.prototype.unbind=function(Q,P){if(v.isWindow(this.obj)){window.removeEventListener(Q,P,false)}else{this.nodes=[this.obj];O.util.bind(this,Q,P)}return this};N.prototype.scrollTop=function(Q){var P=this;if(arguments.length===0){P=document.body.scrollTop||document.documentElement.scrollTop}else{document.body.scrollTop=Q;document.documentElement.scrollTop=Q}return P};N.prototype.scrollLeft=function(Q){var P=this;if(arguments.length===0){P=document.body.scrollLeft||document.documentElement.scrollLeft}else{document.body.scrollLeft=Q}return P};N.prototype.scrollingLeft=function(T,R,Q){var S=I.promise().scope(this),P=this;if(this.scrollLeft()!==T){new p({from:this.scrollLeft(),to:T,during:R,fn:Q,onrunning:function(U){P.scrollLeft(U)},onend:function(){S.resolve()}}).start()}else{S.resolve()}return S};N.prototype.scrollingTop=function(S,R,Q){var T=I.promise().scope(this),P=this;if(this.scrollTop()!==S){new p({from:this.scrollTop(),to:S,during:R,fn:Q,onrunning:function(U){P.scrollTop(U)},onend:function(){T.resolve()}}).start()}else{T.resolve()}return T};var O=function(P){this.currentTarget=null;this.target=null;this.timeStamp=new Date().getTime();this.type="";this.cancelable=false;this._stop=false;this.data=P};O.prototype.stopPropagation=function(){this._stop=true};O.prototype.preventDefault=function(){this.cancelable=true};O.trigger=function(R){var Q=R.currentTarget.events[R.type];for(var P in Q){Q[P].call(R.currentTarget,R)}};O.util={types:{HTMLEvents:"load,unload,abort,error,select,change,submit,reset,focus,blur,resize,scroll",MouseEvent:"click,mousedown,mouseup,mouseover,mousemove,mouseout",UIEvent:"DOMFocusIn,DOMFocusOut,DOMActivate",MutationEvent:"DOMSubtreeModified,DOMNodeInserted,DOMNodeRemoved,DOMNodeRemovedFromDocument,DOMNodeInsertedIntoDocument,DOMAttrModified,DOMCharacterDataModified"},isEvent:function(R){var P={type:R,interfaceName:null};for(var Q in O.util.types){if(O.util.types[Q].indexOf(R)!==-1){P.interfaceName=Q;break}}return P},bind:function(S,R,Q){for(var P=0;P<S.nodes.length;P++){if(!S.nodes[P].events){S.nodes[P].events={}}if(S.nodes[P].events[R]){S.nodes[P].events[R].push(Q)}else{S.nodes[P].events[R]=[];S.nodes[P].events[R].push(Q)}S.nodes[P].addEventListener(R,O.trigger,false)}return S},unbind:function(U,T,S){for(var R=0;R<U.nodes.length;R++){var P=U.nodes[R];if(P.events){if(T&&T!==""){var Q=P.events[T];if(Q){P.removeEventListener(T,O.trigger,false);if(v.isFunction(S)){for(var R in Q){if(Q[R]===S){Q.splice(R,1)}}}else{Q.length=0}}}else{var V=P.events;for(var R in V){P.removeEventListener(R,O.trigger,false);V[R].length=0}}}}return U},unbindAll:function(T){var Q=T.nodes;for(var S=0;S<Q.length;S++){var P=Q[S].events;for(var R in P){Q[S].removeEventListener(R,O.trigger,false);P[R].length=0}}return T},unbindnode:function(R){var P=R.events;for(var Q in P){R.removeEventListener(Q,O.trigger,false);P[Q].length=0}},trigger:function(Q,U,R){var W=this.isEvent(U);if(W.interfaceName){var V=document.createEvent(W.interfaceName);switch(W.interfaceName){case"MouseEvent":V.initMouseEvent(U,true,false,window,0,0,0,0,0,false,false,false,false,0,null);break;case"HTMLEvents":V.initEvent(U,true,false,window);break;case"UIEvents":V.initUIEvents(U,true,false,window,null);break;case"MutationEvent ":V.initMutationEvent(U,true,false,window,null,null,null,null);break}for(var S=0;S<Q.nodes.length;S++){Q.nodes[S].dispatchEvent(V)}}else{var T=new O(R);T.type=U;T.target=Q.nodes[0];var P=Q.nodes[0];while(P){T.currentTarget=P;if(P.events&&P.events[U]){var X=P.events[U];for(var S in X){X[S].call(P,T)}}if(T._stop){break}P=P.parentNode}}return Q}};var x={linner:function(Q,P,S,R){return S*Q/R+P},"ease-in-quad":function(Q,P,S,R){return S*(Q/=R)*Q+P},"ease-out-quad":function(Q,P,S,R){return -S*(Q/=R)*(Q-2)+P},"ease-in-out-quad":function(Q,P,S,R){if((Q/=R/2)<1){return S/2*Q*Q+P}return -S/2*((--Q)*(Q-2)-1)+P},"ease-in-cubic":function(Q,P,S,R){return S*(Q/=R)*Q*Q+P},"ease-out-cubic":function(Q,P,S,R){return S*((Q=Q/R-1)*Q*Q+1)+P},"ease-in-out-cubic":function(Q,P,S,R){if((Q/=R/2)<1){return S/2*Q*Q*Q+P}return S/2*((Q-=2)*Q*Q+2)+P},"ease-in-quart":function(Q,P,S,R){return S*(Q/=R)*Q*Q*Q+P},"ease-out-quart":function(Q,P,S,R){return -S*((Q=Q/R-1)*Q*Q*Q-1)+P},"ease-in-out-quart":function(Q,P,S,R){if((Q/=R/2)<1){return S/2*Q*Q*Q*Q+P}return -S/2*((Q-=2)*Q*Q*Q-2)+P},"ease-in-quint":function(Q,P,S,R){return S*(Q/=R)*Q*Q*Q*Q+P},"ease-out-quint":function(Q,P,S,R){return S*((Q=Q/R-1)*Q*Q*Q*Q+1)+P},"ease-in-out-quint":function(Q,P,S,R){if((Q/=R/2)<1){return S/2*Q*Q*Q*Q*Q+P}return S/2*((Q-=2)*Q*Q*Q*Q+2)+P},"ease-in-sine":function(Q,P,S,R){return -S*Math.cos(Q/R*(Math.PI/2))+S+P},"ease-out-sine":function(Q,P,S,R){return S*Math.sin(Q/R*(Math.PI/2))+P},"ease-in-out-sine":function(Q,P,S,R){return -S/2*(Math.cos(Math.PI*Q/R)-1)+P},"ease-in-expo":function(Q,P,S,R){return(Q===0)?P:S*Math.pow(2,10*(Q/R-1))+P},"ease-out-expo":function(Q,P,S,R){return(Q===R)?P+S:S*(-Math.pow(2,-10*Q/R)+1)+P},"ease-in-out-expo":function(Q,P,S,R){if(Q===0){return P}if(Q===R){return P+S}if((Q/=R/2)<1){return S/2*Math.pow(2,10*(Q-1))+P}return S/2*(-Math.pow(2,-10*--Q)+2)+P},"ease-in-circ":function(Q,P,S,R){return -S*(Math.sqrt(1-(Q/=R)*Q)-1)+P},"ease-out-circ":function(Q,P,S,R){return S*Math.sqrt(1-(Q=Q/R-1)*Q)+P},"ease-in-out-circ":function(Q,P,S,R){if((Q/=R/2)<1){return -S/2*(Math.sqrt(1-Q*Q)-1)+P}return S/2*(Math.sqrt(1-(Q-=2)*Q)+1)+P},"ease-in-elastic":function(R,P,V,U,Q,T){var S;if(R===0){return P}if((R/=U)==1){return P+V}if(typeof T==="undefined"){T=U*0.3}if(!Q||Q<Math.abs(V)){S=T/4;Q=V}else{S=T/(2*Math.PI)*Math.asin(V/Q)}return -(Q*Math.pow(2,10*(R-=1))*Math.sin((R*U-S)*(2*Math.PI)/T))+P},"ease-out-elastic":function(R,P,V,U,Q,T){var S;if(R===0){return P}if((R/=U)===1){return P+V}if(typeof T==="undefined"){T=U*0.3}if(!Q||Q<Math.abs(V)){Q=V;S=T/4}else{S=T/(2*Math.PI)*Math.asin(V/Q)}return(Q*Math.pow(2,-10*R)*Math.sin((R*U-S)*(2*Math.PI)/T)+V+P)},"ease-in-out-elastic":function(R,P,V,U,Q,T){var S;if(R===0){return P}if((R/=U/2)===2){return P+V}if(typeof T==="undefined"){T=U*(0.3*1.5)}if(!Q||Q<Math.abs(V)){Q=V;S=T/4}else{S=T/(2*Math.PI)*Math.asin(V/Q)}if(R<1){return -0.5*(Q*Math.pow(2,10*(R-=1))*Math.sin((R*U-S)*(2*Math.PI)/T))+P}return Q*Math.pow(2,-10*(R-=1))*Math.sin((R*U-S)*(2*Math.PI)/T)*0.5+V+P},"ease-in-back":function(Q,P,T,S,R){if(typeof R==="undefined"){R=1.70158}return T*(Q/=S)*Q*((R+1)*Q-R)+P},"ease-out-back":function(Q,P,T,S,R){if(typeof R==="undefined"){R=1.70158}return T*((Q=Q/S-1)*Q*((R+1)*Q+R)+1)+P},"ease-in-out-back":function(Q,P,T,S,R){if(typeof R==="undefined"){R=1.70158}if((Q/=S/2)<1){return T/2*(Q*Q*(((R*=(1.525))+1)*Q-R))+P}return T/2*((Q-=2)*Q*(((R*=(1.525))+1)*Q+R)+2)+P},"ease-in-bounce":function(Q,P,S,R){return S-x["ease-out-bounce"](R-Q,0,S,R)+P},"ease-out-bounce":function(Q,P,S,R){if((Q/=R)<(1/2.75)){return S*(7.5625*Q*Q)+P}else{if(Q<(2/2.75)){return S*(7.5625*(Q-=(1.5/2.75))*Q+0.75)+P}else{if(Q<(2.5/2.75)){return S*(7.5625*(Q-=(2.25/2.75))*Q+0.9375)+P}else{return S*(7.5625*(Q-=(2.625/2.75))*Q+0.984375)+P}}}},"ease-in-out-bounce":function(Q,P,S,R){if(Q<R/2){return x["ease-in-bounce"](Q*2,0,S,R)*0.5+P}else{return x["ease-out-bounce"](Q*2-R,0,S,R)*0.5+S*0.5+P}}};var p=function(P){this.from=v.isAvalid(P.from)?P.from:0;this.to=v.isAvalid(P.to)?P.to:100;if(v.isString(P.fn)){this.fn=x[P.type]||x["ease-out-quart"]}else{if(v.isFunction(P.fn)){this.fn=P.fn}else{this.fn=x["ease-out-quart"]}}this.during=Math.round((P.during||1000)/16.7);this.onrunning=P.onrunning;this.onend=P.onend;this.delay=v.isAvalid(P.delay)?P.delay:0;this.isstop=true};p._run=function(){var T=0,Q=this.during,S=this.to-this.from,P=this;var R=function(){T++;P.onrunning&&P.onrunning.call(P,P.fn(T,P.from,S,Q));if(T<Q&&!P.isstop){requestAnimationFrame(R)}else{P.onend&&P.onend.call(P);P.isstop=true}};R()};p._runs=function(){var U=0,Q=this.during;var T=[],P=this;for(var R=0;R<this.from.length;R++){T.push(this.to[R]||0-this.from[R])}var S=function(){U++;var W=[];for(var V=0;V<P.from.length;V++){W.push(P.fn(U,P.from[V],T[V],Q))}P.onrunning&&P.onrunning.call(P,W);if(U<Q&&!P.isstop){requestAnimationFrame(S)}else{P.onend&&P.onend.call(P);P.isstop=true}};S()};p._runo=function(){var U=0,Q=this.during;var T={},P=this;for(var R in this.from){T[R]=this.to[R]||0-this.from[R]}var S=function(){U++;var W={};for(var V in P.from){W[V]=P.fn(U,P.from[V],T[V],Q)}P.onrunning&&P.onrunning.call(P,W);if(U<Q&&!P.isstop){requestAnimationFrame(S)}else{P.onend&&P.onend.call(P);P.isstop=true}};S()};p.prototype.start=function(){var P=this;this.isstop=false;setTimeout(function(){if(v.isArray(P.from)){p._runs.call(P)}else{if(v.isObject(P.from)){p._runo.call(P)}else{if(v.isNumber(P.from)){p._run.call(P)}}}},this.delay);return this};p.prototype.stop=function(){this.isstop=true;return this};p.prototype.isRunning=function(){return this.isstop===true};p.prototype.clean=function(){for(var P in this){this[P]=null}};I.tween=function(P){return new p(P)};var d=function(Q){this.mimeType=null;this.data=Q.data||"";this.url=Q.url||"";this.realURL=Q.url||"";this.type=Q.type||"post";this.realType=Q.dataType||"text";this.dataType=["arraybuffer","blob","document","text"].indexOf(Q.dataType)!==-1?Q.dataType:"text";this.async=Q.async===false?false:true;this.timeout=Q.timeout||3000000;this.headers=Q.headers||{};this.events=I.extend({readystatechange:null,loadstart:null,progress:null,abort:null,error:null,load:null,timeout:null,loadend:null},Q.events);var P=this;this._eventproxy=function(S){var R=P.events[S.type];P.response=this;R&&R.call(P,S);if(S.type==="loadend"){P.clean()}};this._uploadproxy=function(S){var R=P.events[S.type];P.response=this;R&&R.call(P,S)};this.xhr=new XMLHttpRequest()};d.prototype.clean=function(){for(var P in this.events){if(P==="progress"){this.xhr.upload.removeEventListener(P,this._uploadproxy,false)}else{this.xhr.removeEventListener(P,this._eventproxy,false)}}for(var P in this){this[P]=null}};d.prototype.abort=function(){this.xhr.abort();return this};d.prototype.header=function(R,Q){if(arguments.length===1){for(var P in R){this.headers[P]=R[P]}}else{this.headers[R]=Q}return this};d.prototype.bind=function(R,Q){if(arguments.length===1){for(var P in R){this.events[P]=R[P]}}else{this.events[R]=Q}return this};d.prototype.unbind=function(S,R){var P=this.events[S];for(var Q in P){if(P[Q]===R){P[Q]=null}}return this};d.prototype.fire=function(){if(this.mimeType){this.xhr.overrideMimeType(this.mimeType)}if(this.type==="get"){var P=i.queryString(this.data);this.url+=(this.url.indexOf("?")!==-1?(P===""?"":"&"+P):(P===""?"":"?"+P))}else{this.data=i.postData(this.data)}this.xhr.open(this.type,this.url,this.async);if(this.async){this.xhr.responseType=this.dataType;this.xhr.timeout=this.timeout}for(var Q in this.events){if(Q==="progress"){this.xhr.upload.addEventListener(Q,this._uploadproxy,false)}else{this.xhr.addEventListener(Q,this._eventproxy,false)}}this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var Q in this.headers){this.xhr.setRequestHeader(Q,this.headers[Q])}if(v.isQueryString(this.data)){this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded")}this.xhr.send(this.data);return this};I.ajax=function(P){var Q=new E();if(P){P.events=I.extend({error:function(R){P.error&&P.error.call(this,R);Q.reject(R)},load:function(U){var T=this.response.status;if((T>=200&&T<300)||T===304||T===0){var S=this.response.response;if(this.realType==="json"){var R=this.response.responseText;try{S=H.parse(R)}catch(U){throw Error("[Packet] ajax unvaliable json string,url is '"+P.url+"'")}}P.success&&P.success.call(this,S);Q.resolve(S)}else{P.error&&P.error.call(this,U);Q.reject(this.response)}}},P.events);new d(P).fire();return Q}else{return Q.resolve()}};I.request=function(P){return new d(P)};var s={importsmapping:{js:[],css:[],hasJs:function(P){return this.js.indexOf(P)!==-1?true:false},hasCss:function(P){return this.css.indexOf(P)!==-1?true:false},addJs:function(P){this.js.push(P);return this},addCss:function(P){this.css.push(P);return this}},css:function(X,W,U,R){if(R===undefined||R===null){R=false}if(!s.importsmapping.hasCss(X)){if(!R){var V=document.createElement("link"),P=null;V.href=X;V.type="text/css";V.rel="stylesheet";var T=function(Y){V.removeEventListener("error",T);V.removeEventListener("load",S);U&&U.call(Y.target,Y)};var S=function(Y){V.removeEventListener("error",T);V.removeEventListener("load",S);if(W){clearTimeout(P);W.call(Y.target,Y)}};V.addEventListener("error",T,false);V.addEventListener("load",S,false);document.getElementsByTagName("head")[0].appendChild(V);s.importsmapping.addCss(X);var Q=function(){try{if(V.sheet.cssRules){if(V.sheet.cssRules.length>0){V.removeEventListener("error",T);V.removeEventListener("load",S);W&&W.call(V)}}}catch(Y){P=setTimeout(Q,100)}};Q()}else{I.ajax({url:X,dataType:"text",type:"get",async:true,success:function(Z){var Y=document.createElement("style");Y.type="text/css";Y.setAttribute("media","screen");Y.appendChild(document.createTextNode(Z));document.getElementsByTagName("head")[0].appendChild(Y);if(W){W(Z)}},error:function(Y){if(U){U()}}});s.importsmapping.addJs(X)}}else{W&&W()}return this},js:function(P,W,Q,V,T){if(T===undefined||T===null){T=true}if(!s.importsmapping.hasJs(P)){if(T){var U=function(X){X.target.removeEventListener("load",U);X.target.removeEventListener("error",S);if(W){W.call(X.target,X)}};var S=function(X){X.target.removeEventListener("load",U);X.target.removeEventListener("error",S);if(Q){Q.call(X.target,X)}};var R=document.createElement("script");R.src=P;R.type="text/javascript";if(V&&V!==""){R.charset=V}R.addEventListener("load",U,false);R.addEventListener("error",S,false);document.getElementsByTagName("head")[0].appendChild(R);s.importsmapping.addJs(P)}else{I.ajax({url:P,dataType:"text",type:"get",async:false,success:function(X){(new Function("try{"+X+"}catch(e){console.error('[Packet]imports: %s ,path "+P+"',e.message);}"))();if(W){W()}},error:function(X){if(Q){Q()}}});s.importsmapping.addJs(P)}}else{if(W){W()}}return this},image:function(Q,U,P){var S=document.createElement("img");var T=function(V){V.target.removeEventListener("load",T);V.target.removeEventListener("error",R);if(U){U.call(V.target,V)}};var R=function(V){V.target.removeEventListener("load",T);V.target.removeEventListener("error",R);if(P){P.call(V.target,V)}};S.src=Q;S.addEventListener("load",T,false);S.addEventListener("error",R,false);return this},text:function(Q,S,P,R){I.ajax({url:Q,data:R,dataType:"text",success:S,type:"get",error:P});return this},json:function(Q,S,P,R){I.ajax({url:Q,data:R,dataType:"json",success:S,type:"get",error:P});return this},load:function(R,U,T,P){if(R){var V=new k();for(var S in R){for(var Q in R[S]){V.add(function(X,W){var Y=this;s[W.type](W.path,function(Z){Y.next()},function(Z){if(P){P.call(Y,W.type,W.path)}})},null,{type:S,path:R[S][Q]})}}V.complete(function(){if(U){U()}}).progress(function(W){if(T){T({total:W.total,runed:W.runed,progress:Math.floor((W.runed/W.total)*100)})}}).run()}else{if(U){U()}}}};I.loader=function(){return s};var o={id:"",preload:[],basePath:"",debug:false,update:-1,sourceMapping:{},pretreat:null,urlfilter:null,cacheReset:false,onpreloadprogress:null,docode:function(P){return P},observers:{},onimportstart:function(P){o.observers[P.packet]&&o.observers[P.packet].onimportstart&&o.observers[P.packet].onimportstart(P)},onimportprogress:function(P){o.observers[P.packet]&&o.observers[P.packet].onimportprogress&&o.observers[P.packet].onimportprogress(P)},onimportend:function(P){o.observers[P.packet]&&o.observers[P.packet].onimportend&&o.observers[P.packet].onimportend(P)}};var C=function(P){I.extend(o,{id:P.id?P.id.toUpperCase():"",preload:P.preload,basePath:(P.basePath[P.basePath.length-1]==="/"?P.basePath:P.basePath+"/"),debug:P.debug,update:P.update,sourceMapping:P.sourceMapping});if(v.isEmptyObject(o.sourceMapping)){o.persistence=false}else{o.persistence=true}};C.prototype.pretreat=function(P){if(P){o.pretreat=P}return this};C.prototype.setPreloadListener=function(P){o.onpreloadprogress=P;return this};C.prototype.setImportListener=function(Q,P){if(arguments.length===2){o.observers[Q]=P}else{if(arguments.length===1&&v.isObject(Q)){o.onimportstart=Q.onimportstart||null;o.onimportprogress=Q.onimportprogress||null;o.onimportend=Q.onimportend||null}}return this};C.prototype.setCodeRewriter=function(P){if(P){q.docode=P}return this};C.prototype.setPathFilter=function(P){if(v.isFunction(P)){o.urlfilter=P}return this};C.prototype.setAppUpdateListener=function(P){if(P){o.appupdate=P}return this};C.prototype.boot=function(Q,P){if(o.persistence){var T="BROODERBUILD["+o.id+"]";try{var W=window.localStorage.getItem(T);var V=W.match(/[0-9]+/),U=0;if(V){U=parseInt(V[0])}o.currentBuild=U}catch(S){o.currentBuild=0}try{window.localStorage.setItem(T,o.sourceMapping.build)}catch(S){}o.update=parseInt(o.update);if(o.update===0||o.currentBuild<o.update){if(o.currentBuild!==0){o.cacheReset=true;try{o.appupdate&&o.appupdate({old:o.currentBuild,current:o.sourceMapping.build,update:o.update})}catch(S){console.error("[Packet] onappupdate called error "+S.message)}}}}else{o.update=-1;o.currentBuild=0;o.cacheReset=true}q.jspersistence=new F("js");q.csspersistence=new F("css");q.jsonpersistence=new F("json");q.textpersistence=new F("text");q.htmlpersistence=new F("html");q.imagepersistence=new F("image");q.templatepersistence=new F("template");q.codepersistence=new F("code");q.otherpersistence=new F("other");if(o.debug){I.debug={modules:e.factory,options:B.options,json:q.jsonpersistence._data,resource:{js:q.jspersistence,css:q.cssmapping,text:q.textpersistence,html:q.htmlpersistence,image:q.imagepersistence},require:q.requiremapping,doms:q.templatepersistence._data}}var R=null,X=arguments.length;I().ready(function(){if(X===1){R=$("body");P=Q}else{if(X===2){R=$(Q)}}q.preload(function(){q.pretreat().done(function(){if(v.isString(P)){R.dataset("view","root").dataset("viewId","root").dataset("option",P);P={}}else{R.dataset("view","root").dataset("viewId","root").dataset("option","")}o.debug&&console.log("[Packet] version:0.10.4,debug:"+o.debug+",basePath:"+o.basePath);var Y=I("*[data-view='root']");if(Y.length>0){e.getViewInstance(Y,P,function(Z){Z.privator("render")})}else{throw Error("[Packet boot] can not find the root element.")}})})})};I.App=function(P){return new C(P)};var G=function(){this._packets_={};this.exports={};this._depends=[];this.children=[];this.packet="";this.require=[];this.include=[];this.template=[];this.js=[];this.css=[];this.html=[];this.json=[];this.image=[];this.text=[];this.usestrict=false};G.prototype.getTemplate=function(R,Q){for(var P in this.template){if(this.template[P].packet===R){return this.template[P].value[Q]||""}}};G.prototype.getJson=function(Q){for(var P in this.json){if(this.json[P].packet===Q){return this.json[P].value||{}}}};G.prototype.getImage=function(Q){for(var P in this.image){if(this.image[P].packet===Q){return this.image[P].value||{}}}};G.prototype.getHtml=function(Q){for(var P in this.html){if(this.html[P].packet===Q){return this.html[P].value||{}}}};G.prototype.getText=function(Q){for(var P in this.text){if(this.text[P].packet===Q){return this.text[P].value||{}}}};G.prototype.getParent=function(){return q.requiremapping[this.parent]||{}};G.prototype.getChild=function(P){if(P>=0&&P<this.children.length){return q.requiremapping[this.children[P]]||{}}};G.prototype.getChildren=function(){var P=[];for(var Q=0;Q<this.children.length;Q++){P.push(q.requiremapping[this.children[Q]])}return P};var F=function(P){this.type=P;this.cacheId="BROODERCACHE["+o.id+":"+this.type.toUpperCase()+"]";this._data={};this.currentTempHash=o.sourceMapping?(o.sourceMapping[this.type]||{}):{};this.init()};F.getStaitcFile=function(S,R,Q){var P=q[S+"persistence"];if(P&&S==="json"||S==="html"||S==="text"||S==="image"){s[S](F.getStaticPath(S,R),function(T){Q&&Q(T)})}};F.getStaticPath=function(S,R){var P=q[S+"persistence"],U=null;if(o.sourceMapping[S]&&o.sourceMapping[S][R]){if(P.check(R)){U=P.get(R)}else{if(S!=="json"&&S!=="text"&&S!=="html"){var Q=R.match(q.issuffix),T="";if(S==="image"){T="png"}if(Q){T=Q[0].substring(1,Q[0].length-1)}U=o.basePath+R.replace(q.issuffix,"").replace(q.isdot,"/")+T}else{U=o.basePath+R.split(".").join("/")+(S==="json"?".json":(S==="html"?".html":(S==="text")?".txt":".json"))}P.set(R,o.sourceMapping[S][R],U).save()}}else{if(S!=="json"&&S!=="text"&&S!=="html"){var Q=R.match(q.issuffix),T="";if(S==="image"){T="png"}if(Q){T=Q[0].substring(1,Q[0].length-1)}U=o.basePath+R.replace(q.issuffix,"").replace(q.isdot,"/")+T}else{U=o.basePath+R.split(".").join("/")+(S==="json"?".json":(S==="html"?".html":(S==="text")?".txt":".json"))}}return U};F.prototype.save=function(){if(o.persistence){var P=this;setTimeout(function(){try{window.localStorage.setItem(P.cacheId,window.JSON.stringify(P._data))}catch(Q){}},0)}};F.prototype.clean=function(){try{window.localStorage.removeItem(this.cacheId)}catch(P){console.log(P)}};F.prototype.init=function(){if(o.persistence){if(o.cacheReset){try{window.localStorage.removeItem(this.cacheId)}catch(Q){}}try{var P=window.JSON.parse(window.localStorage.getItem(this.cacheId))||{};this._data=P}catch(Q){}}else{try{window.localStorage.removeItem(this.cacheId)}catch(Q){}}return this};F.prototype.get=function(P){return this._data[P]?this._data[P].data:null};F.prototype.has=function(Q,P){return this._data[Q]&&this.data[Q].hash===P};F.prototype.set=function(R,Q,P){this._data[R]={hash:Q,data:P};return this};F.prototype.check=function(R){var Q=this.getCurrentHash(R);var P=this._data[R]?this._data[R].hash:null;return Q&&Q===P};F.prototype.getCurrentHash=function(P){return this.currentTempHash[P]};F.prototype.isLoaded=function(){return !v.isEmptyObject(this._data)};var z=function(P){this.promise=P};z.prototype.done=function(){this.promise.resolve()};z.prototype.json=function(Q,P){F.getStaitcFile("json",Q,P)};z.prototype.html=function(Q,P){F.getStaitcFile("html",Q,P)};z.prototype.text=function(Q,P){F.getStaitcFile("text",Q,P)};z.prototype.image=function(Q,P){F.getStaitcFile("image",Q,P)};z.prototype.path=function(Q,P){F.getStaticPath(Q,P)};var q=function(R){var Q={basepath:o.basePath,packetName:"",back:null,target:"",onimportstart:o.onimportstart,onimportend:o.onimportend,onimportprogress:o.onimportprogress},P=this;I.extend(Q,R);if(Q.packetName!==""){var S=Q.packetName.match(q.issuffix),U=null;if(S){U=S[0].substring(1,S[0].length-1)}var T=Q.basepath+Q.packetName.replace(q.isdot,"/")+(U?"."+U:".js");this.option=Q;this.option.path=T;this.info=[];if(q.packetmapping.indexOf(T)===-1){Q.onimportstart&&Q.onimportstart({packet:Q.packetName,path:T});this.load(Q.packetName,T,function(){var X=q.dependsSort.call(P,P.info);if(X.length===P.info.length){P.info=X;for(var W=0;W<P.info.length;W++){var aa=P.info[W].info;q.requiremapping[aa.packet]=aa;var Y=q.docode(P.info[W].code,aa),V="";Y=q.deleteR(Y)+"$.is.isEmptyObject(module.exports)?(module.exports=exports):'';";if(aa.usestrict==="true"){aa.usestrict=true;if(o.debug){V='"use strict";'+Y+"//# sourceURL="+aa.path}else{V=Y}}else{if(o.debug){V=Y+"//# sourceURL="+aa.path}else{V=Y}}try{aa.basePath=Q.basepath;aa.folder=aa.path.substring(0,aa.path.lastIndexOf("/"))+"/";I.___info=aa;new Function("$","Module","Option","module","exports","require","Plugin","Method",V).call(aa,I,I.Module,I.Option,aa,{},function(ac){var ab=q.requiremapping[ac];if(ab){return ab.exports}else{throw Error("[Packet] method require() called error,packet of "+ac+" is not required in packet of "+aa.packet)}},function(ab){I.Plugin(ab)},function(ab){I.Method(ab)});I.___info=null}catch(Z){I.___info=null;console.error("[Packet] packet import error name of "+aa.packet+" path of "+aa.path+" Message:"+Z.stack)}}q.packetmapping.push(T);P.option.back&&P.option.back();P.option.onimportend&&P.option.onimportend({packet:P.option.packetName,path:P.option.path})}else{throw Error("[Packet] packet _depends error,maybe has circle _depends,or some file has no packet info.")}P.clean()},Q.target)}else{P.option.back&&P.option.back();P.clean()}}};q.i=/\r\n/g;q.k=/\r/g;q.l=/\n/g;q.f=/>[\s]+</g;q.isdot=/\./g;q.issuffix=/\[.*\]/g;q.isNote=/\/\*[\w\W]*?\*\//;q.isNoteall=/\/\*[\w\W]*?\*\//g;q.isInfo=/@([\s\S]*?);/g;q.isPacketTag=/["\']@[A-Za-z0-9_\[\]-]+\.[A-Za-z0-9_-]*["\']/g;q.isCurrentTag=/["\']@\.[A-Za-z0-9_-]+["\']/g;q.isPacket=/["\']@[A-Za-z0-9_\[\]-]+["\']/g;q.isOther=/["\']\\@[A-Za-z0-9_-]+["\']/g;q.isNotep=/\<\!\-\-\[[0-9a-zA-Z-_]*?\]\-\-\>/;q.isNotes=/\<\!\-\-\[[0-9a-zA-Z-_]*?\]\-\-\>/g;q.isNotec=/\<\!\-\-[\s\S]*?\-\-\>/g;q.isNotet=/\<\!\-\-\[@[\s\S]*?;\]\-\-\>/;q.isNotets=/\<\!\-\-\[@[\s\S]*?;\]\-\-\>/g;q.isCssPath=/url\(.+?\)/g;q.packetmapping=[];q.cssmapping=[];q.jsmapping=[];q.imagemapping={};q.requiremapping={};q.packetDone=[];q.deleteR=function(Q){if(o.debug){for(var P=0;P<2;P++){Q=Q.replace(/\n/,"")}return Q}else{return Q}};q.docode=function(P){return P};q.pretreat=function(){var P=I.promise();if(o.pretreat){o.pretreat.call(new z(P))}else{P.resolve()}return P};q.dependsSort=function(T){var R=[],V=[];for(var U=0;U<T.length;U++){var Q=T[U];Q.dependTimes=Q.info._depends.length;for(var S=0;S<Q.info._depends.length;S++){var W=Q.info._depends[S];if(q.packetDone.indexOf(W)!==-1){Q.dependTimes=Q.dependTimes-1}}}for(var U=0;U<T.length;U++){var Q=T[U];if(Q.dependTimes===0||Q.info._depends.length===0){q.packetDone.push(Q.info.packet);R.push(Q)}else{Q.dependTimes=Q.info._depends.length;V.push(Q)}}for(var U=0;U<R.length;U++){var Q=R[U];for(var S=0;S<V.length;S++){var P=V[S];if(P.info._depends.indexOf(Q.info.packet)!==-1){P.dependTimes=P.dependTimes-1;if(P.dependTimes<=0){q.packetDone.push(P.info.packet);R.push(P);V.splice(S,1);break}}}}for(var U=0;U<V.length;U++){var Q=V[U];for(var S=0;S<Q.info._depends.length;S++){var P=Q.info._depends[S];if(q.packetDone.indexOf(P)!==-1){Q.dependTimes=Q.dependTimes-1;if(Q.dependTimes<=0){q.packetDone.push(Q.packet);R.push(Q);V.splice(U,1);break}}}}return R};q.getPacketInfo=function(V){var Y=V.match(q.isNote),T=this.option.basepath,R=new G();if(Y&&Y.length>0){var W=Y[0];var X=W.match(q.isInfo);for(var Q=0;Q<X.length;Q++){var Y=X[Q];var U=Y.split(" ");if(U.length>=2){var aa=U[0].substring(1,U[0].length),Z=U[1][U[1].length-1]===";"?U[1].substring(0,U[1].length-1):U[1],ac=null;if(!R[aa]){R[aa]=[]}var ab=Z.match(q.issuffix);if(ab){ac=ab[0].substring(1,ab[0].length-1)}var ad=Z.split(":");if(ad.length>1){var P=ad[ad.length-1];if(aa!=="image"){P=P.replace(q.issuffix,"")}R._packets_[P]=ad[0];ad.splice(ad.length-1,1);Z=ad.join(":")}else{var S=ad[0].split(".");var P=S[S.length-1];if(aa!=="image"){P=P.replace(q.issuffix,"")}R._packets_[P]=ad[0]}switch(aa){case"packet":R.packet=Z.replace(q.issuffix,"");R.path=T+R.packet.replace(q.isdot,"/")+".js";break;case"require":Z={packet:Z.replace(q.issuffix,""),path:"",value:null};R._depends.push(ad[0]);R.children.push(ad[0]);Z.path=T+ad[0].replace(q.issuffix,"").replace(q.isdot,"/")+".js";break;case"include":Z={packet:Z.replace(q.issuffix,""),path:"",value:null};R.children.push(ad[0]);Z.path=T+ad[0].replace(q.issuffix,"").replace(q.isdot,"/")+".js";break;case"json":Z={packet:Z.replace(q.issuffix,""),path:T+Z.replace(q.issuffix,"").replace(q.isdot,"/")+".json",value:null};break;case"template":Z={packet:Z.replace(q.issuffix,""),path:T+Z.replace(q.issuffix,"").replace(q.isdot,"/")+".html",value:null};break;case"html":Z={packet:Z.replace(q.issuffix,""),path:T+Z.replace(q.issuffix,"").replace(q.isdot,"/")+".html",value:null};break;case"image":Z={packet:Z,path:T+Z.replace(q.issuffix,"").replace(q.isdot,"/")+(ac?"."+ac:".png"),value:null};break;case"text":Z={packet:Z.replace(q.issuffix,""),path:T+Z.replace(q.issuffix,"").replace(q.isdot,"/")+".txt",value:null};break;case"css":Z={packet:Z.replace(q.issuffix,""),path:"",value:null};if(Z.packet.indexOf("http")===-1){if(Z.packet.indexOf("/")===-1){Z.path=T+Z.packet.replace(q.issuffix,"").replace(q.isdot,"/")+".css"}else{Z.path=basePath+Z.packet}}break;case"js":Z={packet:Z.replace(q.issuffix,""),path:"",value:null};if(Z.packet.indexOf("http")===-1){if(Z.packet.indexOf("/")===-1){Z.path=T+Z.packet.replace(q.issuffix,"").replace(q.isdot,"/")+".js"}else{Z.path=basePath+Z.packet}}break;default:R[aa]=Z;break}if(R[aa].indexOf(Z)===-1){R[aa].push(Z)}}}}else{R.packet="nopacket"}return R};q.replacePacketNames=function(Q,P){return P.replace(q.isPacketTag,function(U){var R=U.split("."),S=0,T=R[1].substring(0,R[1].length-1),S=R[0].substring(2);if(Q._packets_[S]){return U[0]+Q._packets_[S]+"."+T+U[U.length-1]}else{throw Error("[Packet] packet can not find with tag of "+U+",packet is "+Q.packet)}}).replace(q.isCurrentTag,function(R){return R[0]+Q.packet+"."+R.split(".")[1]}).replace(q.isPacket,function(S){var R=S.substring(2,S.length-1);if(Q._packets_[R]){return S[0]+Q._packets_[R]+S[S.length-1]}else{throw Error("[Packet] packet can not find with tag of "+S+",packet is "+Q.packet)}}).replace(q.isOther,function(R){return R.substring(1)})};q.parseCode=function(S){var V=[],R=q.isNoteall.exec(S);while(R){var Q=R[0].match(/@packet .*;/);if(Q){var U=Q[0].substring(8,Q[0].length-1).split(" ");Q=U[0];V.push({index:R.index,packet:Q})}R=q.isNoteall.exec(S)}for(var T=0;T<V.length;T++){var P=V[T+1]?V[T+1].index:S.length;q.codepersistence.set(V[T].packet,q.codepersistence.getCurrentHash(V[T].packet),S.substring(V[T].index,P)).save()}};q.parseTemplate=function(Y){Y=Y.replace(q.f,"><").replace(q.i,"").replace(q.k,"").replace(q.l,"");var X=Y.split(q.isNotet);if(X.length>1){var V=Y.match(q.isNotets);for(var S=0;S<V.length;S++){var Z=V[S].substring(13,V[S].length-5).split(" ");var Q=Z[0];var aa=q.replaceHtmlPath(Q,X[S+1]);if(aa!==""){var T={},P=aa.split(q.isNotep),W=aa.match(q.isNotes);for(var R=0;R<W.length;R++){var U=W[R].substring(5,W[R].length-4);T[U]=P[R+1].replace(q.isNotec,"")}q.templatepersistence.set(Q,q.templatepersistence.getCurrentHash(Q),T).save()}}}};q.parseCss=function(T){var W=[],R=q.isNoteall.exec(T);while(R){var Q=R[0].match(/@packet .*;/);if(Q){var V=Q[0].substring(8,Q[0].length-1).split(" ");Q=V[0];W.push({index:R.index,packet:Q})}R=q.isNoteall.exec(T)}for(var S=0;S<W.length;S++){var P=W[S+1]?W[S+1].index:T.length;var U=q.replaceCssPath(W[S].packet,T.substring(W[S].index,P).replace(q.isNoteall,""));q.csspersistence.set(W[S].packet,q.csspersistence.getCurrentHash(W[S].packet),U).save()}};q.preload=function(Q){var P=I.queue();P.complete(function(){Q&&Q()});P.progress(function(R){o.onpreloadprogress&&o.onpreloadprogress(R)});if(!q.codepersistence.isLoaded()){if(o.sourceMapping.source){P.add(function(){var R=this;s.js(o.sourceMapping.source,function(){R.next()},function(){R.next()})})}}q.loadpreloadFile(P);P.run()};q.loadpreloadFile=function(P){for(var Q in o.preload){var T=o.preload[Q];var S=o.basePath+"/"+T.split(".").join("/")+".js";if(q.jspersistence.check(T)){S=q.jspersistence.get(T)}else{if(o.sourceMapping&&o.sourceMapping.js){var R=o.sourceMapping&&o.sourceMapping.js[T];if(R){q.jspersistence.set(T,R,S).save()}}}P.add(function(V,U){var W=this;s.js(U,function(){W.next()},function(){W.next()})},null,S)}};q.loadTextFile=function(S,R,P){for(var Q=0;Q<S.length;Q++){var T=S[Q].path;if(!q[R+"persistence"].check(S[Q].packet)){S[Q].path=o.urlfilter?o.urlfilter({type:R,path:T,packet:S[Q].packet}):T;P.add(function(V,U){I.ajax({url:U.path,type:"get",dataType:R,success:function(W){if(R==="html"){W=q.replaceHtmlPath(U.packet,W)}U.value=W;q[R+"persistence"].set(U.packet,q[R+"persistence"].getCurrentHash(U.packet),W).save();P.next()}})},null,S[Q])}else{S[Q].value=q[R+"persistence"].get(S[Q].packet)}}};q.load=function(V,Y,Z,S){var Q=this;var P=q.getPacketInfo.call(Q,V);P.parent=Z;if(P.packet==="nopacket"){console.error("[Packet] file has no packet info,path of "+S)}try{V=q.replacePacketNames.call(Q,P,V)}catch(V){console.error(V.stack)}Q.info.push({info:P,code:V});var U=I.queue();U.progress(function(ab){ab.packet=P.packet;Q.option.onimportprogress&&Q.option.onimportprogress(ab)});U.complete(function(){Y&&Y()});q.loadTextFile(P.json,"json",U);q.loadTextFile(P.html,"html",U);q.loadTextFile(P.text,"text",U);for(var T=0;T<P.js.length;T++){var aa=P.js[T].path;if(q.jsmapping.indexOf(P.js[T].path===-1)){q.jsmapping.push(aa);if(!q.jspersistence.check(P.js[T].packet)){aa=o.urlfilter?o.urlfilter({type:"css",path:aa,packet:P.js[T].packet}):aa;q.jspersistence.set(P.js[T].packet,q.jspersistence.getCurrentHash(P.js[T].packet),aa).save()}else{aa=q.jspersistence.get(P.js[T].packet)}U.add(function(ac,ab){s.js(ab,function(){U.next()})},null,aa)}}for(var T=0;T<P.css.length;T++){if(q.cssmapping.indexOf(P.css[T].path)===-1){q.cssmapping.push(P.css[T].path);var aa=P.css[T].path,W=q.csspersistence.check(P.css[T].packet);if(!W){P.css[T].path=o.urlfilter?o.urlfilter({type:"css",path:aa,packet:P.css[T].packet}):aa;U.add(function(ab,ac){if(o.persistence){I.ajax({url:ac.path,dataType:"text",type:"get",async:true,success:function(af){var ae=q.replaceCssPath(ac.packet,af);var ad=document.createElement("style");ad.type="text/css";ad.setAttribute("media","screen");ad.setAttribute("packet",ac.packet);document.getElementsByTagName("head")[0].appendChild(ad);ad.appendChild(document.createTextNode(ae));ac.value=ad;q.csspersistence.set(ac.packet,q.csspersistence.getCurrentHash(ac.packet),ae).save();U.next()}})}else{s.css(ac.path,function(){U.next()})}},null,P.css[T])}else{var R=q.csspersistence.get(P.css[T].packet);var X=document.createElement("style");X.type="text/css";X.setAttribute("media","screen");X.setAttribute("packet",P.css[T].packet);document.getElementsByTagName("head")[0].appendChild(X);P.css[T].value=X;X.appendChild(document.createTextNode(R))}}}for(var T=0;T<P.template.length;T++){var aa=P.template[T].path,W=q.templatepersistence.check(P.template[T].packet);if(!W){P.template[T].path=o.urlfilter?o.urlfilter({type:"template",path:aa,packet:P.template[T].packet}):aa;U.add(function(ab,ac){I.ajax({url:ac.path,type:"get",dataType:"text",success:function(ae){ae=ae.replace(q.f,"><").replace(q.i,"").replace(q.k,"").replace(q.l,"");ae=q.replaceHtmlPath(ac.packet,ae);var ah={},ag=ae.split(q.isNotep),ad=ae.match(q.isNotes);for(var af=0;af<ad.length;af++){var ai=ad[af].substring(5,ad[af].length-4);ah[ai]=ag[af+1].replace(q.isNotec,"")}ac.value=ah;q.templatepersistence.set(ac.packet,q.templatepersistence.getCurrentHash(ac.packet),ah).save();U.next()}})},null,P.template[T])}else{P.template[T].value=q.templatepersistence.get(P.template[T].packet)}}for(var T=0;T<P.image.length;T++){if(!q.imagemapping[P.image[T].packet]){if(!q.imagepersistence.check(P.image[T].packet)){var aa=P.image[T].path;P.image[T].path=o.urlfilter?o.urlfilter({type:"image",path:aa,packet:P.image[T].packet}):aa;q.imagepersistence.set(P.image[T].packet,q.imagepersistence.getCurrentHash(P.image[T].packet),aa).save()}else{aa=q.imagepersistence.get(P.image[T].packet)}U.add(function(ac,ab){s.image(ab.path,function(){q.imagemapping[ab.packet]=this;ab.value=this;U.next()})},null,P.image[T])}else{P.image[T].value=q.imagemapping[P.image[T].packet]}}for(var T=0;T<P.require.length;T++){var aa=P.require[T].path;P.require[T].path=o.urlfilter?o.urlfilter({type:"js",path:aa,packet:P.require[T].packet}):aa;if(q.packetmapping.indexOf(aa)===-1){q.packetmapping.push(aa);U.add(function(ac,ab){Q.load(ab.packet,ab.path,function(){U.next()},ab.parent)},null,{path:P.require[T].path,parent:P.packet,packet:P.require[T].packet})}}U.run()};q.replaceCssPath=function(W,P){var Q=q.csspersistence.get(W),S=[];if(Q){var X=Q.match(/url\(.+?\)/g);if(X){for(var T=0;T<X.length;T++){S.push(X[T])}}}var R=W.split(".");R.splice(R.length-1,1);var V=o.basePath.length>0?(o.basePath[o.basePath.length-1]==="/"?o.basePath:o.basePath+"/"):"",U=V+R.join("/");return P.replace(/url\(.+?\)/g,function(ac){ac=ac.substring(4,ac.length-1);var af=false,ag=ac;if(ac[0]==="'"||ac[0]==='"'){af=true;ac=ac.substring(1,ac.length-1)}var Z=ac.split("/");var Y=Z[Z.length-1].split(".")[0],aa=false;for(var ab=0;ab<S.length;ab++){if(S[ab].indexOf(Y)!==-1){aa=true;ag=S[ab];break}}if(!aa){if(ac[0]==="."&&ac[1]==="/"){ag=U+ac.substring(1)}else{var ae=ac.match(/\.\.\//g),ad=W.split(".");ad.splice(ad.length-1,1);if(ae){ad.splice(ad.length-ae.length,ae.length);ac=ac.substring(ae.length*3);if(ad.length>0){ag=V+ad.join("/")+"/"+ac}else{ag=V+ac}}else{if(ac[0]==="/"){ag=ac}else{ag=U+"/"+ac}}}if(af){ag="url('"+ag+"')"}else{ag="url("+ag+")"}}return ag})};q.replaceHtmlPath=function(P,S){var Q=q.templatepersistence.get(P),U="",V=[];if(Q){for(var R in Q){U+=Q[R]}var T=U.match(/src=['"].+?['"]/g);if(T){for(var R=0;R<T.length;R++){V.push(T[R])}}}return S.replace(/src=['"].+?['"]/g,function(X){if(X.indexOf("<%")===-1){var ab=X,ac=X.substring(5,X.length-1),aa=ac.split("/"),Y=aa[aa.length-1].split(".")[0],W=false;if(U.indexOf(Y)!==-1){for(var Z=0;Z<V.length;Z++){if(V[Z].indexOf(Y)!==-1){ab=V[Z];W=true;break}}}if(!W){ab='src="'+o.basePath+X.substring(5,X.length-1)+'"'}return ab}else{return X}})};q.prototype.load=function(P,U,S,R){var Q=this,T=U;if(q.codepersistence.check(P)){q.load.call(this,q.codepersistence.get(P),S,R,T)}else{U=o.urlfilter?o.urlfilter({type:"js",path:U,packet:P}):U;I.ajax({url:U,dataType:"text",type:"get",success:function(V){q.codepersistence.set(P,q.codepersistence.getCurrentHash(P),V).save();q.load.call(Q,V,S,R,T)},error:function(V){S&&S()}})}};q.prototype.clean=function(){for(var P in this){this[P]=null}};I.packet=function(P){new q(P)};I.source=function(P){for(var Q in P){var R=true;if(q[Q+"persistence"].isLoaded()){R=false}if(R){q["parse"+Q[0].toUpperCase()+Q.substring(1)](P[Q])}}};I._packet=q;var h=function(Q,R){Q=h.cache(Q);var P=h.precompile(Q);this._scope=P.info;this._code=h.code(P.template);this._fn=h.compile(this._code);this._session=null;this._caching={};this._macrofn=R||{};I.extend(this._macrofn,h.globalMacro)};h.a=/&lt;%/g;h.b=/%&gt;/g;h.c=/&quot;/g;h.d=/<%|%>/g;h.e=/^=.*;$/;h.f=/>[\s]+</g;h.g=/\{\{.*\}\}/;h.h=/\<\!\-\-[\s\S]*?\-\-\>/g;h.j=/\{\{|\}\}/;h.i=/\r\n/g;h.k=/\r/g;h.l=/\n/g;h.m=/"/g;h.ch=/@cache\(.*?\)/g;h.globalMacro={include:function(P,S){var T=new h(P.template);var R=T.render(P.data);for(var Q in T._caching){this._caching[Q]=T._caching[Q]}return R}};h.code=function(P){var R="var out='';";var T=P.replace(h.a,"<%").replace(h.b,"%>").split(h.d);for(var Q=0;Q<T.length;Q++){var S=T[Q];Q%2!==0?(h.e.test(S)?(R+="out+"+S):(R+=S)):(R+='out+="'+S.replace(h.m,'\\"')+'";')}R+="return out;";return R};h.compile=function(P){try{return new Function("data","fn",P)}catch(Q){console.error("[template error] "+Q.message);console.info("[template result] "+P);return function(){return""}}};h.precompile=function(an){an=an.replace(h.h,"").replace(h.f,"><").replace(h.i,"").replace(h.k,"").replace(h.l,"");if(an.indexOf("<@")!==-1){var ao=-1,al="",Y="start",at="",ab="",ar,Q="";var aa=true,ai="",S={},ak=0,ap=0,R=0,V=0,ag=[];while(ao<an.length){ao++;al=an[ao];if(Y==="start"&&al==="<"&&an[ao+1]==="@"){Y="tagstart";ak=ao;continue}if(Y==="tagstart"&&al==="@"){Y="tagname";at="";S={};continue}if(Y==="start"&&al==="<"&&an[ao+1]==="/"&&an[ao+2]==="@"){R=ao;Y="endtag";ai="";ao+=2;continue}if(Y==="endtag"&&al===">"){Y="start";V=ao+1;ag.push({type:"endtag",tagname:ai,start:R,end:V});continue}if(Y==="tagname"&&al===" "){Y="propname";ab="";continue}if(Y==="tagname"&&(al==="/"||al===">")){if(al===">"){ap=ao+1;Y="start";aa=true}else{if(al==="/"){ap=ao+2;Y="start";aa=false}}if(at!==""){ag.push({type:"tag",tagname:at,props:S,body:aa,start:ak,end:ap})}continue}if(Y==="propname"&&al==="="){Y="propvalue";continue}if(Y==="propvalue"&&(al==="'"||al==='"')){Y="propvalueing";ar=al;Q="";continue}if(Y==="propvalueing"&&al===ar){Y="tagname";S[ab]=Q;continue}if(Y==="endtag"){ai+=al}if(Y==="tagname"){at+=al}if(Y==="propname"){ab+=al}if(Y==="propvalueing"){Q+=al}}var ac=0,X=0,T=0,aw=false,al=null,ae=[],ah="",U=0,aq=[];for(var ao in ag){if(ag[ao].type==="tag"&&ag[ao].body===false&&aw===false){ag[ao].bodystr="";ag[ao].from=ag[ao].start;ag[ao].to=ag[ao].end;ae.push(ag[ao])}if(ag[ao].type==="tag"&&ag[ao].body===true){aw=true;if(al===null){al=ag[ao];al.from=ag[ao].start}if(ac===0){X=ag[ao].start;T=ag[ao].end}ac++}if(ag[ao].type==="endtag"){ac--;if(ac===0){al.to=ag[ao].end;al.bodystr=an.substring(T,ag[ao].start);ae.push(al);al=null;aw=false}}}for(var ao in ae){var am=ae[ao].props,W="";for(var au in am){var P=am[au];if(h.g.test(P)){var Z=P.split(h.j),af="";for(var ad=1;ad<=Z.length;ad++){if(ad%2===0){if(Z[ad-1]!==""){af+=Z[ad-1]+"+"}}else{if(Z[ad-1]!==""){af+="'"+Z[ad-1]+"'+"}else{af+=Z[ad-1]}}}var aj=(af.length>0?af.substring(0,af.length-1):"''");W+=au+":"+aj+","}else{W+=au+":'"+am[au]+"',"}}ae[ao].parameter="{"+(W.length>0?W.substring(0,W.length-1):W)+"}";aq.push({name:ae[ao].tagname,body:ae[ao].bodystr,parameter:ae[ao].parameter});var av=an.substring(U,ae[ao].from);ah+=av;ah+="<%=this._macro("+ao+(ae[ao].parameter===""?"":","+ae[ao].parameter)+");%>";U=ae[ao].to}ah+=an.substring(U,an.length);return{template:ah,info:aq}}else{return{template:an,info:[]}}};h.cache=function(P){return P.replace(h.ch,function(R){var Q=R.substring(7,R.length-1);return"data-cache='<%=this._cache("+Q+");%>'"})};h.prototype._cache=function(S){var P=false;for(var Q in this._caching){if(this._caching[Q]===S){P=true;return Q}}if(!P){var R=l.uuid();this._caching[R]=S;return R}};h.prototype._macro=function(R,P){var S=this._scope[R],Q=this;if(this._macrofn[S.name]){return this._macrofn[S.name].call(this,P,function(){if(S.body!==""){var T=new h(S.body).macro(Q._macrofn);T._caching=Q._caching;return T.render.apply(T,Q._session)}else{return""}})}else{return"[nodata]"}};h.prototype.session=function(){if(arguments.length===0){return this._session}else{this._session=arguments[0];return this}};h.prototype.render=function(){this._session=Array.prototype.slice.call(arguments);return this._fn.apply(this,this._session)};h.prototype.renderTo=function(R){var Q=Array.prototype.slice.call(arguments);Q.splice(0,1);this._session=Q;var P=this._fn.apply(this,this._session);this.flush(R.html(P))};h.prototype.renderAppendTo=function(R){var Q=Array.prototype.slice.call(arguments);Q.splice(0,1);this._session=Q;var P=this._fn.apply(this,this._session);this.flush($(P).appendTo(R))};h.prototype.flush=function(Q){var P=this;Q.find("[data-cache]").add(Q).each(function(){var R=$(this).dataset("cache");if(R){$(this).data("-cache-",P._caching[R]).removeAttr("data-cache")}})};h.prototype.code=function(){return this._code};h.prototype.fn=function(){if(arguments.length===1){this._fn=arguments[0];return this}return this._fn};h.prototype.macro=function(P,Q){if(arguments.length===1){this._macrofn=P||{}}else{if(arguments.length===2){this._macrofn[P]=Q}}return this};h.prototype.clean=function(){for(var P in this){this[P]=null}};I.template=function(){var P=Array.prototype.slice.call(arguments).join("");return new h(P)};I.setTemplateGlobalMacro=function(P,Q){if(arguments.length===1){I.extend(h.globalMacro,P)}else{if(arguments.length===2){h.globalMacro[P]=Q}}return this};M.prototype.template=function(){var Q=new h(P.html()),P=this;return{render:function(S,R){P.html(Q.render(S,R));return P},compile:function(S,R){return Q.render(S,R)}}};var t=function(){};t._invoke=function(V,S){var aa=this.__adapt__._factory.mapping[this.__adapt__._parent];var ab=this.__adapt__._factory.mapping[this.__adapt__._type];var R=[],Q=this;if(aa&&aa.prototype[V]){var Z=aa.prototype[V];if(v.isFunction(Z)){var Y=new aa();var X=Object.keys(this);for(var U=0;U<X.length;U++){Y[X[U]]=this[X[U]]}for(var U in ab.prototype){if(v.isFunction(ab.prototype[U])){if(!aa.prototype[U]){R.push(U);(function(ac){Y[ac]=function(){return Q[ac].apply(Q,Array.prototype.slice.call(arguments))}})(U)}}else{R.push(U);Y[U]=this[U]}}try{var P=Z.apply(Y,S),T=Object.keys(Y);for(var U=0;U<T.length;U++){if(R.indexOf(T[U])===-1){this[T[U]]=Y[T[U]]}}return P}catch(W){console.error(W.message);return null}}else{return Z}}else{return undefined}};t.prototype.privator=function(R){var P=this.__adapt__._private["_"+R];if(P){var Q=Array.prototype.slice.call(arguments);Q.splice(0,1);return P.apply(this,Q)}else{return null}};t.prototype.staticor=function(R,S){var P=this.__adapt__._static["__"+R];if(v.isFunction(P)){var Q=Array.prototype.slice.call(arguments);Q.splice(0,2);return P.apply(S,Q)}else{return P}};t.prototype.type=function(){return this.__adapt__._type};t.prototype.shortName=function(){return this.__adapt__._shortName};t.prototype.packet=function(){return this.__adapt__._packet};t.prototype.typeOf=function(P){return this.__adapt__._mapping[P]!==undefined};t.prototype.extendsOf=function(Q){for(var P in this.__adapt__._extendslink){if(this.__adapt__._extendslink[P]===Q){return true}}return false};t.prototype.factory=function(){return this.__adapt__._factory};t.prototype.clean=function(){this.__adapt__._factory=null;var Q=Object.keys(this);for(var P in Q){this[Q[P]]=null}};t.prototype.isSingleton=function(){return this.__adapt__._singleton};t.prototype.superClass=function(Q){var P=Array.prototype.slice.call(arguments);P.splice(0,1);return t._invoke.call(this,Q,P)};t.prototype.invokeClass=function(Q,R){var P=Array.prototype.slice.call(arguments);P.splice(0,2);return t._invoke.call(this,R,P)};Object.defineProperty(t.prototype,"__adapt__",{enumerable:false,configurable:false,writable:false,value:{_type:"adapt",_shortName:"adapt",_packet:"",_parent:null,_factory:null,_private:null,_static:null,_option:null,_mapping:{},_original_option:[],_instance_props:["privator","staticor","type","shortName","packet","typeOf","factory","clean","superClass"],_extendslink:[]}});var u=function(){this.mapping={adapt:t}};var J={};u.a=/^(init)$|^_\w*/;u.b=/^(name)|(extend)|(option)/;u.c=/^(packet)|(layout)/;u.d=/^__/;u.e=/^_/;u.prototype.def=function(T){var ad=new Function();var aa={_type:(T.packet&&T.packet!==""?T.packet+".":"")+T.name,_shortName:T.name||"",_packet:T.packet||"",_mapping:{adapt:1},_extendslink:[],_instance_props:[],_private:{},_static:{},_factory:this,_singleton:T.singleton===null?T.singleton:false,_option:T.option||{},_original_option:[]};aa._mapping[aa._type]=1;for(var U in T.option){aa._original_option.push(U)}var V=new t();!T.extend&&(T.extend=["adapt"]);var W=T.extend;v.isString(T.extend)&&(W=[T.extend]);aa._parent=W[0];var Z=I.extend({},I.json.clone(this.mapping[W[0]].prototype.__adapt__._option));aa._option=I.extend(Z,aa._option);for(var U=W.length-1;U>=0;U--){if(W[U]!=="adapt"){var Y=this.mapping[W[U]].prototype;var P={},R={},X={};I.extend(P,I.json.clone(Y.__adapt__._mapping));I.extend(R,Y.__adapt__._private);I.extend(X,Y.__adapt__._static);I.extend(aa._mapping,P);I.extend(aa._private,R);I.extend(aa._static,X);var Q=Object.keys(Y);for(var ac=0;ac<Q.length;ac++){if(I.is.isFunction(Y[ac])){if(!u.a.test(ac)){V[Q[ac]]=Y[Q[ac]]}}else{V[Q[ac]]=Y[Q[ac]]}}}}Object.defineProperty(V,"__adapt__",{enumerable:false,configurable:false,writable:false,value:aa});for(var U in T){if(u.d.test(U)){aa._static[U]=T[U]}else{if(v.isFunction(T[U])){if(u.e.test(U)){aa._private[U]=T[U]}else{V[U]=T[U];if(U!=="init"){aa._instance_props.push(U)}}}else{if(!u.b.test(U)){V[U]=T[U];if(!u.c.test(U)){aa._instance_props.push(U)}}}}}ad.prototype=V;var S=ad;while(S){aa._extendslink.push(S.prototype.__adapt__._type);S=this.mapping[S.prototype.__adapt__._parent]}this.mapping[aa._type]=ad;return this};u.prototype.get=function(P){return this.mapping[P]};u.prototype.create=function(U,T){var S=null,Q=U;var P=this.mapping[Q];if(P){S=new P();var W=I.extend({},I.json.clone(P.prototype.__adapt__._option));S.option=I.extend(W,T);for(var R=P.prototype.__adapt__._extendslink.length-1;R>=0;R--){var V=this.mapping[P.prototype.__adapt__._extendslink[R]];if(V&&V.prototype.init){V.prototype.init.call(S,S.option)}}}return S};u.prototype.instance=function(V,U){var S=null,R=V;var Q=this.mapping[R];if(Q){var T=Q.prototype.__adapt__._singleton;if(T){if(!J[V]){var P=new Q();var W=I.extend({},I.json.clone(Q.prototype.__adapt__._option));I.extend(W,U);P.option=W;J[V]=P}S=J[V]}else{S=new Q();var W=I.extend({},I.json.clone(Q.prototype.__adapt__._option));I.extend(W,U);S.option=W}}return S};u.prototype.invoke=function(T,X,Z){var W=null;if(v.isString(T)){var R=this.mapping[T];R&&(W=new R())}else{if(v.isObject(T)){W=T}}if(W&&W[X]){if(v.isFunction(W[X])&&v.isObject(Z)){var aa=Array.prototype.slice.call(arguments),Y=Object.keys(Z),U=W;aa.splice(0,3);for(var S=0;S<Y.length;S++){U[Y[S]]=Z[Y[S]]}try{var P=U[X].apply(U,aa),Q=Object.keys(U);for(var S=0;S<Q.length;S++){Z[Q[S]]=U[Q[S]]}return P}catch(V){console.error(V.message);return null}}}return null};u.prototype.proxy=function(Q,P,V){if(arguments.length>1){var Y=null,S=null;if(v.isString(Q)){var W=this.mapping[Q];W&&(Q=new W())}else{if(Q instanceof t){var U=new this.mapping[Q.__adapt__._type](),T=Object.keys(Q);for(var R=0;R<T.length;R++){U[T[R]]=Q[T[R]]}Q=U}else{Q=null}}if(v.isObject(Q)){if(v.isArray(P)){Y=P;S=V}else{if(v.isFunction(P)){S=P}}var X=new this.mapping[Q.__adapt__._type]();for(var R in Q){if(v.isFunction(Q[R])){if(!Y||Y&&Y.indexOf(R)!==-1){(function(Z){X[R]=function(){var aa=arguments;S&&S.call(Q,{methodName:Z,invoke:function(){return Q[Z].apply(Q,aa)}})}})(R)}}else{X[R]=Q[R]}}return X}else{return null}}else{return null}};u.prototype.has=function(P){return this.mapping[P]!==undefined};I.adapt=function(){return new u()};var n=function(){this.dataType="";this.type=null;this.object=null;this.value=null};var f=function(P,R,Q){if($.is.isObject(R)){return f.setObject(P,"",R,null,Q)}else{return f.setArray(P,"",R,null,Q)}};f.setunwrite=function(R,P,Q){if(!R.hasOwnProperty(P)){Object.defineProperty(R,P,{enumerable:false,configurable:false,writable:false,value:Q})}else{R[P]=Q}};f.setwrite=function(R,P,Q){if(!R.hasOwnProperty(P)){Object.defineProperty(R,P,{enumerable:false,configurable:false,writable:true,value:Q})}else{R[P]=Q}};f.setObject=function(Q,W,S,V,U){var X=Object.keys(S);for(var P=0;P<X.length;P++){var T=X[P],R=S[T];f.setObserve(Q,T,R,S,U);(function(Y){S.__defineSetter__(Y,function(Z){try{this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"object",type:"edit",object:this,property:Y,original:this["_"+Y+"_"],value:Z}))}catch(aa){}this["_"+Y+"_"]=Z});S.__defineGetter__(Y,function(){return this["_"+Y+"_"]})})(T);f.setwrite(S,"_"+T+"_",R)}f.setunwrite(S,"_*_",{fn:U,key:W,name:Q});f.setunwrite(S,"_+_",V);f.setunwrite(S,"set",function(Z,aa){var Y="edit";if(this.hasOwnProperty(Z)){this[Z]=aa}else{Y="add";f.setwrite(this,"_"+Z+"_",f.setObserve(this["_*_"].name,Z,aa,this,this["_*_"].fn));this.__defineSetter__(Z,function(ab){this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"object",type:"edit",object:this,property:Z,original:this["_"+Z+"_"],value:ab}));this["_"+Z+"_"]=ab});this.__defineGetter__(Z,function(){return this["_"+Z+"_"]})}this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"object",type:Y,object:this,property:Z,original:undefined,value:aa}));return this});f.setunwrite(S,"get",function(Y){return this["_"+Y+"_"]});f.setunwrite(S,"remove",function(){if($.is.isArray(this["_+_"])){this["_+_"].splice(this["_+_"].indexOf(this),1)}});f.setunwrite(S,"getIndex",function(){if($.is.isArray(this["_+_"])){return this["_+_"].indexOf(this)}});f.setunwrite(S,"getPath",function(){var Y=this,aa=[],ab=[];while(Y){var Z=Y["_*_"].key;if(Z.indexOf("*")===-1){aa.push(Z);ab.push(Z)}else{aa.push(Y["_+_"].indexOf(Y))}Y=Y["_+_"]}aa.splice(aa.length-1,1);ab=ab.reverse();ab.splice(0,1);return{name:ab.join("."),value:aa.reverse()}});return S};f.setArray=function(P,R,U,T,S){for(var Q=0;Q<U.length;Q++){U[Q]=f.setObserve(P,R+"*",U[Q],U,S)}f.setunwrite(U,"_*_",{fn:S,key:R,name:P});f.setunwrite(U,"_+_",T);f.setunwrite(U,"splice",function(){var Z=Array.prototype.slice.call(arguments),W=arguments[0],aa=[],V="remove";var Y=arguments[1],ac=null;for(var X=2;X<Z.length-2;X++){aa.push(Z[X])}if(aa.length>0){for(var X=0;X<Z.length;X++){aa[X]=f.setObserve(this["_*_"].name,this["_*_"].key+"*",aa[X],this,this["_*_"].fn)}V="edit";ac=aa}else{V="remove";var ab=[];for(var X=arguments[0];X<arguments[0]+arguments[1];X++){ab.push(this[X])}ac=ab}this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"array",type:V,object:this,original:this,form:W,size:Y,value:ac}));return Array.prototype.splice.apply(this,Z)});f.setunwrite(U,"pop",function(){this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"array",type:"remove",object:this,original:this,form:this.length-1,size:1}));return Array.prototype.pop.call(this)});f.setunwrite(U,"push",function(V){this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"array",type:"add",object:this,original:this,form:this.length-1,size:1,value:V}));return Array.prototype.push.call(this,f.setObserve(this["_*_"].name,this["_*_"].key+"*",V,this,this["_*_"].fn))});f.setunwrite(U,"shift",function(){this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"array",type:"remove",object:this,original:this,form:0,size:1,value:this[0]}));return Array.prototype.shift.call(this)});f.setunwrite(U,"unshift",function(V){this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"array",type:"add",object:this,original:this,form:0,size:1,value:V}));return Array.prototype.push.call(this,f.setObserve(this["_*_"].name,this["_*_"].key+"*",V,this,this["_*_"].fn))});f.setunwrite(U,"removeAll",function(){this["_*_"].fn&&this["_*_"].fn($.extend(new n(),{name:this["_*_"].name,dataType:"array",type:"remove",object:this,original:this,form:0,size:this.length,value:this}));return Array.prototype.shift.call(this)});f.setunwrite(U,"getPath",function(){var V=this,X=[],Y=[];while(V){var W=V["_*_"].key;if(W.indexOf("*")===-1){X.push(W);Y.push(W)}else{X.push(V["_+_"].indexOf(V))}V=V["_+_"]}X.splice(X.length-1,1);Y=Y.reverse();Y.splice(0,1);return{name:Y.join("."),value:X.reverse()}});return U};f.setObserve=function(P,Q,T,S,R){if($.is.isArray(T)){return f.setArray(P,Q,T,S,R)}else{if($.is.isObject(T)){return f.setObject(P,Q,T,S,R)}else{return T}}};I.observe=function(P,R,Q){return f(P,R,Q)};var e={regs:{a:/^(dom)|^(option)|^(name)|^(extend)|^(init)/},isMutation:function(){return(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null)!==null},domInserted:function(R,T){var S=$(T);if(!S.dataset("parentView")){var P=false;while(R&&R!==window.document){if(R.datasets&&R.datasets["-view-"]){P=true;break}else{R=R.parentNode}}if(P){var Q=R.datasets["-view-"];Q.onnodeinserted&&Q.onnodeinserted(T)}}},domRemoved:function(R,U){var T=$(U);if(!T.dataset("parentView")){var P=false,S=R;while(R&&R!==window.document){if(R.datasets&&R.datasets["-view-"]){P=true;break}else{R=R.parentNode}}if(P){var Q=R.datasets["-view-"];Q.onnoderemoved&&Q.onnoderemoved(U,S)}}},factory:I.adapt(),getPacketName:function(Q,R){if(Q){Q=Q.trim();if(Q!==""){var P=Q.split(".");if(P.length>1){P.splice(P.length-1,1);return P.join(".")}else{return Q}}else{return""}}else{return""}},getArrayUnDuplicate:function(P){var R={},S=[];for(var Q=0;Q<P.length;Q++){R[P[Q]]=1}for(var Q in R){S.push(Q)}return S},getViewInstance:function(S,R,Q){var P=S.dataset("view");if(P){e.get("root",P,R,function(T){if(!S.data("-view-")){T.dom=S;Q&&Q(T)}else{Q&&Q(S.data("-view-"))}})}else{throw Error("[Packet] view can not init.the element has no attribute like view-*")}},add:function(U){if(!U.tagName){U.tagName="div"}e.factory.def(U);var T=(U.packet&&U.packet!==""?U.packet+".":"")+U.name;var R=e.factory.get(T).prototype;var S=[U.className||""];for(var Q=R.__adapt__._extendslink.length-1;Q>=0;Q--){var P=e.factory.get(R.__adapt__._extendslink[Q]);if(P){var V=P.prototype.className;if(V&&V!==""){if(S.indexOf(V)===-1){S.push(V)}}}}R.fullClassName=S.join(" ")},has:function(P){return e.factory.has(P)},get:function(T,P,R,Q){if(P!==undefined&&P!==null&&P!==""){if(!e.has(P)){var S=e.getPacketName(P);I.packet({packetName:S,target:T,back:function(){if(Q){if(e.has(P)){Q(e.factory.instance(P,R))}else{throw Error("[Packet] can not find module with name of "+P+",it is not in the packet of "+e.getPacketName(P)+" or the packet file inited failed.")}}}})}else{if(Q){Q(e.factory.instance(P,R))}}}else{throw Error("[Packet] packet name can not undefined or null or ''.")}},task:new A()};var B={options:{},add:function(P){if(P.name&&P.name!==""){B.options[P.name]=P.option}else{throw Error("[Packet] option name can not null or ''")}},has:function(Q){var P=B.options[Q];if(P){return P}else{return false}},get:function(V,Q,R){if(Q!==undefined&&Q!==""&&Q!=="null"){if(Q[0]!=="{"&&Q[0]!=="["){var P=B.has(Q);if(P===false){var U=e.getPacketName(Q);I.packet({packetName:U,target:V,back:function(){if(R){var W=B.has(Q);if(W){R(W)}else{throw Error("[Packet] can not find option with name of "+Q+",is not in the packet of "+e.getPacketName(Q))}}}})}else{R&&R(P)}}else{var S={};try{S=window.JSON.parse(Q)}catch(T){}R&&R(S)}}else{R&&R(null)}}};var j=function(R,P,Q){this.target=R;this.data=Q;this.type=P;this._goon=true;this.currentTarget=null};j.prototype.clone=function(){return I.extend(new viewevnet(),this)};j.prototype.stopPropagation=function(){this._goon=false};var y=function(){this._data=null;this._bad=null;this._offline=null;this._error=null};y.prototype.data=function(P){if(v.isFunction(P)){this._data=P}return this};y.prototype.bad=function(P){if(v.isFunction(P)){this._bad=P}return this};y.prototype.offline=function(P){if(v.isFunction(P)){this._offline=P}return this};y.prototype.error=function(P){if(v.isFunction(P)){this._error=P}return this};var L=function(){this._data=[]};L.finder=function(Q){var R=[];for(var P=0;P<Q._finders._data.length;P++){if(Q.dom.get(0).contains(Q._finders._data[P].get(0))){R.push(Q._finders._data[P])}}Q._finders._data=R;Q.dom.find("[data-find]").each(function(){var S=$(this).dataset("find");$(this).data("-finder-",{name:S}).removeAttr("data-find").attr("finder",S);Q._finders._data.push($(this));try{Q["find_"+S]&&Q["find_"+S]($(this),Q._finders)}catch(T){console.error("[Packet] view finder called error with module of "+Q.type()+" Message:"+T.message)}})};L.group=function(Q){var R=[];for(var P=0;P<Q._groups._data.length;P++){if(Q.dom.get(0).contains(Q._groups._data[P].get(0))){R.push(Q._groups._data[P])}}Q._groups._data=R;Q.dom.find("*[data-group]").each(function(){var S=$(this).dataset("group"),U={name:S,items:{}},V=$(this);$(this).data("-group-",U).removeAttr("data-group").attr("group",S);Q._groups._data.push($(this));$(this).find("*[data-groupi]").each(function(){U.items[$(this).dataset("groupi")]=$(this);var W=$(this).dataset("groupi");$(this).data("-groupitem-",{name:W,group:V}).removeAttr("data-groupi").attr("groupi",W)});if(Q["group_"+S]){try{Q["group_"+S]($(this))}catch(T){console.error("[Packet] view groups called error with module of "+Q.type()+" Message:"+T.message)}}})};L.event=function(P){P.dom.find("[data-bind]").each(function(){if(!$(this).data("_eventback_")){var V={},S=$(this).dataset("bind").split(" ");for(var Q in S){var T=S[Q].split(":"),U=T[0],R=T[1];V[U]=R;$(this).removeAttr("data-bind").bind(U,function(X){var W=$(this).data("_eventback_")[X.type];P["bind_"+W]&&P["bind_"+W].call(P,$(this),X)})}$(this).data("_eventback_",V)}})};e.add({name:"request",request:function(P,T,R){var S=this.getRequestState(),U=false;var Q={url:"",type:R||"post",dataType:"json",data:""};if(v.isString(P)){U=true;Q.url=P}else{if(v.isObject(P)){U=true;I.extend(Q,P)}}if(U){Q.data=T;this.doRequest(Q,S);return S}else{throw Error("[Packet] request parameter error")}},doRequest:function(Q,R){var P=this;I.ajax(Q).done(function(S){if(S.code&&S.code==="1"){R._data&&R._data.call(P,S.data)}else{R._bad&&R._bad.call(P,S)}}).fail(function(S){R._error&&R._error.call(P,S)})},getRequest:function(P,Q){return this.request(P,Q,"get")},postRequest:function(P,Q){return this.request(P,Q,"post")},putRequest:function(P,Q){return this.request(P,Q,"put")},deleteRequest:function(P,Q){return this.request(P,Q,"delete")},patchRequest:function(P,Q){return this.request(P,Q,"patch")},getRequestState:function(){return new y()}});e.add({name:"view",extend:"request",packet:"",option:{},parentView:null,init:null,template:"",onbeforeinit:null,onendinit:null,onunload:I.nfn,onnoderemoved:null,onnodeinserted:null,onchildremove:null,_render:function(S){if(!this.dom.data("-view-")){this.dom.data("-view-",this);this._finders=new L();this._groups=new L();if(this.dom.children().length>0){this.template=this.dom.html()}var R=this.dom.dataset("option"),Q=this;if(this.dom.hasClass("_futuretochange_")){this.dom.removeClass("_futuretochange_");var U=this.__adapt__._factory.mapping[this.__adapt__._type].prototype;var T=U.fullClassName;if(this.dom.get(0).tagName.toLowerCase()!==this.tagName){var P=$("<"+U.tagName+" class='"+T+"' data-view='"+this.dom.dataset("view")+"' data-parent-view='"+this.dom.dataset("parentView")+"' data-view-id='"+this.dom.dataset("viewId")+"' daa-option='"+this.dom.dataset("option")+"'></"+U.tagName+">");this.dom.get(0).parentNode.replaceChild(P.get(0),this.dom.get(0));this.dom=P}}this._handlers=[];B.get(this.type(),R,function(W){if(W){Q.option.override=W.override||{};for(var V in W){if(V!=="override"){if(V.indexOf("override_")===0){Q.option.override[V.substring(9)]=W[V]}else{Q.option[V]=W[V]}}}}for(var V in Q.option.override){if(!e.regs.a.test(V)){Q[V]=Q.option.override[V]}}Q.name=Q.type();Q.shortname=Q.shortName();if(typeof Q.onbeforeinit==="function"){try{Q.onbeforeinit(Q.option)}catch(X){console.error("[Packet] onbeforeinit called error with module of "+Q.type()+" Message:"+X.message)}}if(Q.className&&Q.className!==""){Q.dom.addClass(Q.className)}if(typeof Q.init==="function"){try{Q.init(Q.option)}catch(X){console.error("[Packet] init called error with module of "+Q.type()+" Message:"+X.stack)}}if(typeof Q.onendinit==="function"){try{Q.onendinit(Q.option)}catch(X){console.error("[Packet] onendinit called error with module of "+Q.type()+" Message:"+X.message)}}S&&S()})}return this},delegate:function(){L.finder(this);L.group(this);L.event(this);return this},getId:function(){return this.dom.dataset("viewId")},getDom:function(){return this.dom},postData:function(Q){Q.dataType="json";var P=this;I.ajax(Q).done(function(R){if(R.code&&R.code==="1"){Q.back&&Q.back.call(P,R.data)}else{Q.dataerror&&Q.dataerror.call(P,R)}}).fail(function(R){Q.neterror&&Q.neterror.call(P)})},triggerEvent:function(P){P.currentTarget=this;if(this._handlers[P.type]){return this._handlers[P.type].call(this,P)}else{if(this["event_"+P.type]){return this["event_"+P.type].call(this,P)}else{return true}}},initEvent:function(P,Q){var R=new j(this,P,Q);return R},dispatchEvent:function(Q,S,T){T=T===undefined?true:T;var R=new j(this,Q,S);if(T===true){var P=this;while(P){P.triggerEvent(R);if(R._goon){P=P.parentView}else{break}}}else{this.triggerEvent(R);if(R._goon&&this.typeOf("viewgroup")){for(var P=0;P<this.children.length;P++){this.children[P].dispatchEvent(Q,S,false)}}}},dispatchSuroundEvent:function(R,T){var S=new j(this,R,T);if(this.parentView){for(var Q in this.parentView.children){var P=this.parentView.children[Q];P.triggerEvent(S);if(!S._goon){break}}}},addEventListener:function(Q,P){this._handlers[Q]=P;return this},removeEventListener:function(Q,P){this._handlers[Q]=null;if(this["event_"+Q]){this["event_"+Q]=null}return this},removeAllEventListener:function(){for(var P in this._handlers){this._handlers[P]=null}for(var P in this){if(P.indexOf("event_")===0){this[P]=null}}return this},remove:function(){this.dom.remove()},render:function(Q){var P=this,S=$.promise();S.scope(this);try{P.onbeforerender&&P.onbeforerender()}catch(R){console.error("[Packet] onbeforerender called error with module of "+P.type()+" Message:"+R.message)}try{I.template(P.template).renderTo(P.dom,Q);P.delegate()}catch(R){console.error("[Packet] render called error with module of "+P.type()+" Message:"+R.message)}try{P.onendrender&&P.onendrender()}catch(R){console.error("[Packet] onendrender called error with module of "+P.type()+" Message:"+R.message)}setTimeout(function(){S.resolve()},0);return S},original:function(R){var Q=Object.getPrototypeOf(this)[R];if(I.is.isFunction(Q)){var P=Array.prototype.slice.call(arguments);P.splice(0,1);return Q.apply(this,P)}else{return Q}},parentsInvoke:function(R){var S=this.parentView,T=null;while(S){var Q=S[R];if(Q&&I.is.isFunction(Q)){var P=Array.prototype.slice.call(arguments);P.splice(0,1);T=Q.apply(S,P);break}else{S=S.parentView}}return T},parentsParameter:function(R){var Q=this.parentView,P=null;while(Q){P=Q.parameters[R];if(P!==undefined){break}else{Q=Q.parentView}}return P},parentViews:function(R){R=I.is.isAvalid(R)?(I.is.isNumber(R)?R:parseInt(R)):0;var P=this.parentView,Q=R-1;while(P&&Q>0){Q--;P=P.parentView}return P},previousSibling:function(){if(this.parentView){var P=this.parentView.children.indexOf(this);if(P!==0){return this.parentView.children[P-1]}else{return null}}else{return null}},nextSibling:function(){if(this.parentView){var P=this.parentView.children.indexOf(this);if(P+1<this.parentView.children.length){return this.parentView.children[P+1]}else{return null}}else{return null}},setStorage:function(R,S){var Q="",P=window.localStorage.getItem(this.name);if(!P){P={};P[R]=S;Q=window.JSON.stringify(P)}else{P=window.JSON.parse(P);P[R]=S;Q=window.JSON.stringify(P)}window.localStorage.setItem(this.name,Q);return this},getStorage:function(Q){var P=window.localStorage.getItem(this.name);if(P){P=window.JSON.parse(P)}else{P={}}return P[Q]},removeStorage:function(P){return this.setStorage(P,null)},cleanStorage:function(){window.localStorage.removeItem(this.name);return this},getUUID:function(){return I.util.uuid()},observe:function(Q,R){var P=this;return I.observe(Q,R,function(T){var S=Q+"_"+T.object.getPath().name+(T.property?"."+T.property:"")+"_"+T.type;if(P[S]){P[S](T)}})},getStaticJson:function(P){var Q=I.promise().scope(this);F.getStaitcFile("json",P,function(R){Q.resolve(R)});return Q},getStaticHtml:function(P){var Q=I.promise().scope(this);F.getStaitcFile("html",P,function(R){Q.resolve(R)});return Q},getStaticText:function(P){var Q=I.promise().scope(this);F.getStaitcFile("text",P,function(R){Q.resolve(R)});return Q},getStaticImage:function(P){var Q=I.promise().scope(this);F.getStaitcFile("image",P,function(R){Q.resolve(R)});return Q},getStaticPath:function(P,Q){return F.getStaitcFile(P,Q)},clean:function(){try{this.onunload()}catch(R){console.error("[Packet] onunload called error with module of "+this.type()+" Message:"+R.stack)}this._finders.length=0;this._groups.length=0;var S=this.parentView;if(S&&S.children){var T=S.children.indexOf(this);if(T!==-1){S.children.splice(T,1);try{S.onchildremove&&S.onchildremove(this)}catch(R){console.error("[Packet] onchildremove called error with module of "+S.type()+" Message:"+R.stack)}}}var Q=Object.keys(this);for(var P in Q){this[Q[P]]=null}},finders:function(P){var R=$();for(var Q=0;Q<this._finders._data.length;Q++){if(arguments.length===1){if(this._finders._data[Q].data("-finder-")&&this._finders._data[Q].data("-finder-").name===P){R.add(this._finders._data[Q])}}else{R.add(this._finders._data[Q])}}return R},groups:function(){var Q=$();for(var P=0;P<this._groups._data.length;P++){if(arguments.length===1){if(this._finders._data[P].data("-group-")&&this._finders._data[P].data("-group-").name===name){Q.add(this._groups._data[P])}}else{Q.add(this._groups._data[P])}}return Q}});e.add({name:"viewgroup",extend:"view",layout:null,ondomready:null,onoption:null,oninitchild:null,marcos:{},_render:function(T){if(!this.dom.data("-view-")){this.dom.data("-view-",this);this._finders=new L();this._groups=new L();this._handlers={};this.children=[];var R=this,S=this.dom.dataset("option"),P=I.queue();if(this.dom.hasClass("_futuretochange_")){this.dom.removeClass("_futuretochange_");var W=this.__adapt__._factory.mapping[this.__adapt__._type].prototype;var U=W.fullClassName;if(this.dom.get(0).tagName.toLowerCase()!==this.tagName){var Q=$("<"+W.tagName+" class='"+U+"' data-view='"+this.dom.dataset("view")+"' data-parent-view='"+this.dom.dataset("parentView")+"' data-view-id='"+this.dom.dataset("viewId")+"' daa-option='"+this.dom.dataset("option")+"'></"+W.tagName+">");this.dom.get(0).parentNode.replaceChild(Q.get(0),this.dom.get(0));this.dom=Q}}try{B.get(this.type(),S,function(Z){if(!R.option){R.option={}}if(!R.option.override){R.option.override={}}if(Z){for(var Y in Z){if(Y.indexOf("override_")===0&&Y!=="override"){R.option.override[Y.substring(9)]=Z[Y]}else{R.option[Y]=Z[Y]}}for(var Y in Z.override){R.option.override[Y]=Z.override[Y]}}for(var Y in R.option.override){if(!e.regs.a.test(Y)){R[Y]=R.option.override[Y]}}if(typeof R.onbeforeinit==="function"){try{R.onbeforeinit(R.option)}catch(aa){console.error("[Packet] onbeforeinit called error with module of "+R.type()+" Message:"+aa.stack)}}var ab=R.layout;if(ab===""&&R.dom.children().length>0){ab=R.dom.html()}if(I.is.isString(ab)){try{var X=I.template(ab);X.macro(I.extend({module:function(ac,af){var ae=ac.type,ad=ac.option,ah=ac.id;var ag={tagName:"div",fullClassName:"_futuretochange_"};if(R.__adapt__._factory.mapping[ae]){var ag=R.__adapt__._factory.mapping[ae].prototype}return"<"+ag.tagName+" class='"+ag.fullClassName+"' data-parent-view='"+R.getId()+"' data-view='"+ae+"' data-view-id='"+(ah||R.getId()+"-"+R.children.length)+"' data-option='"+(ad||"")+"'></"+ag.tagName+">"}},R.marcos));ab=X.fn(new Function("data","pid","option","module",X.code())).render({id:R.getId(),option:R.option},R.getId(),R.option,function(ad,ac,af){var ae={tagName:"div",fullClassName:"_futuretochange_"};if(R.__adapt__._factory.mapping[ad]){var ae=R.__adapt__._factory.mapping[ad].prototype}return"<"+ae.tagName+" class='"+ae.fullClassName+"' data-parent-view='"+R.getId()+"' data-view='"+ad+"' data-view-id='"+(af||R.getId()+"-"+R.children.length)+"' data-option='"+(ac||"")+"'></"+ae.tagName+">"});R.dom.html(ab);X.flush(R.dom)}catch(aa){console.error("[Packet] parse layout called error with module of "+R.type()+" Message:"+aa.stack);R.dom.html("")}}if(typeof R.ondomready==="function"){try{R.ondomready(R.option)}catch(aa){console.error("[Packet] ondomready called error with module of "+R.type()+" Message:"+aa.stack)}}if(typeof R.onnodeinserted==="function"){try{R.onnodeinserted(R.dom)}catch(aa){console.error("[Packet] onnodeinserted called error with module of "+R.type()+" Message:"+aa.stack)}}P.complete(function(ac){ac.name=ac.type();ac.shortname=ac.shortName();ac.delegate();if(ac.className&&ac.className!==""){ac.dom.addClass(ac.className)}if(typeof ac.init==="function"){try{ac.init(ac.option)}catch(ad){console.error("[Packet] init called error with module of "+R.type()+" Message:"+ad.stack)}}if(typeof ac.onendinit==="function"){try{ac.onendinit(ac.option)}catch(ad){console.error("[Packet] onendinit called error with module of "+R.type()+" Message:"+ad.stack)}}T&&T()});R.dom.find("*[data-parent-view='"+R.getId()+"']").each(function(){P.add(function(ag,ah){var ai=this;var ad={},af=ah.dataset("view"),ac=ah.dataset("viewId");if(ag.oninitchild){try{ag.oninitchild({id:ac,type:af})}catch(ae){console.error("[Packet] oninitchild called error with module of "+R.type()+" Message:"+ae.stack)}}e.get(ag.type(),af,null,function(aj){for(var ak=aj.__adapt__._extendslink.length-1;ak>=0;ak--){I.extend(ad,ag.option[aj.__adapt__._extendslink[ak]])}I.extend(ad,ag.option[ac]);var an=null;if(typeof ag.onoption==="function"){try{an=ag.onoption.call(ag,ad,af,ac);I.extend(ad,an)}catch(am){console.error("[Packet] onoption called error with module of "+R.type()+" Message:"+am.stack)}}I.extend(aj.option,ad);if(!ah.data("-view-")){var al=aj;al.dom=ah;al.parentView=ag;ag.children.push(al);al.privator("render",function(){ai.next(ag)})}else{ai.next(ag)}})},function(){this.next(R)},I(this))});P.run(R)})}catch(V){T&&T();console.error(V.stack)}}return this},_addChild:function(R,U){var P=this,Q=I.extend({type:null,option:"",parameters:null,id:this.getId()+"-"+this.children.length,container:"body",domIndex:null,target:null,index:null},R);var S=Q.index;if(Q.container.isWrapper&&!Q.container.isWrapper()){Q.container="body"}try{e.get(P.type(),Q.type,null,function(Y){if(S===undefined||S===null||S>=P.children.length){P.children.push(Y)}else{P.children.splice(S,0,Y)}var Z=Y.__adapt__._factory.mapping[Y.__adapt__._type].prototype.fullClassName;var aa=I(Q.container);var V=I("<"+Y.tagName+" class='"+Z+"' data-parent-view='"+P.getId()+"' data-view='"+Q.type+"' data-view-id='"+Q.id+"' data-option='"+(v.isObject(Q.option)?"":Q.option)+"'></"+Y.tagName+">");if(v.isNumber(Q.domIndex)){var ab=aa.children(Q.domIndex);if(ab.length>0){Y.dom=V.insertBefore(ab)}else{Y.dom=V.appendTo(aa,false)}}else{Y.dom=V.appendTo(aa,false)}var X={};for(var W=Y.__adapt__._extendslink.length-1;W>=0;W--){I.extend(X,P.option[Y.__adapt__._extendslink[W]])}I.extend(X,I.json.clone(Y.__adapt__._option));I.extend(X,P.option[Q.id]);I.extend(X,P.option[Q.type]);if(v.isObject(Q.option)){var ac={};ac.override=Q.option.override||{};for(var W in Q.option){if(W!=="override"){if(W.indexOf("override_")===0){ac.override[W.substring(9)]=Q.option[W]}else{ac[W]=Q.option[W]}}}Y.option=I.extend(X,ac);for(var W in Y.option.override){if(!e.regs.a.test(W)){Y[W]=Y.option.override[W]}}}if(!P.dom.contain(Y.dom)){Y.___outer___=true}Y.option=X;Y.parameters=Q.parameters;Y.target=Q.target;Y.parentView=P;Y.privator("render",function(){if(typeof P.oninitchild==="function"){try{P.oninitchild({id:Y.getId(),type:Y.type()})}catch(ad){console.error("[Packet] oninitchild called error with module of "+P.type()+" ["+ad.message+"]")}}U&&U.call(Y)})})}catch(T){U&&U.call(null);console.error(T.stack)}},render:function(){var P=$.promise();P.scope(this);this.dom.unbind();this.dom.get(0).datasets={};this.privator("render",function(){P.resolve()});return P},getChildrenByType:function(Q){var R=[];for(var P=0;P<this.children.length;P++){if(this.children[P].typeOf(Q)){R.push(this.children[P])}}return R},getChildByType:function(Q,P){P=(P===undefined||P===P)?0:P;return this.getChildrenByType(Q)[P]},getChildById:function(R){var Q=null;for(var P=0;P<this.children.length;P++){if(this.children[P].getId()===R){Q=this.children[P];break}}return Q},getChildAt:function(P){if(I.is.isNumber(P)&&P>=0&&P<this.children.length){return this.children[P]}else{return null}},childEach:function(Q){for(var P=0;P<this.children.length;P++){if(Q){if(Q.call(this.children[P],this.children[P],P,this.children)===false){break}}else{break}}},contains:function(P){return this.children.indexOf(P)!==-1},getFirstChild:function(P){if(I.is.isAvalid(P)){return this.getChildrenByType(P)[0]}else{return this.children[0]}},getLastChild:function(Q){var R=null;if(I.is.isAvalid(Q)){var P=this.getChildrenByType(Q);if(P.length>0){R=P[P.length-1]}}else{this.children.length>0&&(R=this.children[this.children.length-1])}return R},getChildIndex:function(P){return this.children.indexOf(P)},addChild:function(R){var P=this,Q=new E();Q.scope(this);e.task.add(function(T,S){var U=this;P.privator("addChild",S,function(){U.next();Q.resolve(this)})},null,R);return Q},setChildIndex:function(R,Q){if(Q!==undefined&&Q!==null&&Q<this.children.length-1){var P=this.children.indexOf(R);this.children.splice(P,1);this.children.splice(Q,0,R)}return this},duplicateChild:function(Q,P){if(Q){this.privator("addChild",null,{type:this.name,option:I.extend({},this.option),parameters:this.parameters,id:P||(this.getId()+"-"+this.children.length),container:this.dom.parent()})}return this},removeChild:function(Q){var P=this.getChildById(Q);P&&P.remove();return this},removeChildAt:function(P){if(I.is.isNumber(P)&&P>0&&P<this.children.length){this.children[P].remove()}return this},removeAllChild:function(){while(this.children.length>0){this.children.pop().remove()}return this},clean:function(){var S=[];for(var P in this.children){if(this.children[P].___outer___){S.push(this.children[P])}}while(S.length>0){S.pop().remove()}try{this.onunload()}catch(R){console.error("[Packet] onunload called error with module of "+this.type()+" Message:"+R.stack)}var T=this.parentView;if(T&&T.children){var U=T.children.indexOf(this);if(U!==-1){T.children.splice(U,1);try{T.onchildremove&&T.onchildremove(this)}catch(R){console.error("[Packet] onchildremove called error with module of "+T.type()+" Message:"+R.stack)}}}var Q=Object.keys(this);for(var P in Q){this[Q[P]]=null}}});e.add({name:"root",extend:"viewgroup",className:"root",init:function(){if(!e.isMutation()){this.dom.bind("DOMNodeInserted",function(P){e.domInserted(P.target.parentNode,P.target)}).bind("DOMNodeRemoved",function(P){e.domRemoved(P.path[1],P.target)})}else{this.dom.mutationObserve(function(U){for(var S=0;S<U.length;S++){var Q=U[S],T=Q.addedNodes,P=Q.removedNodes;for(var R=0;R<T.length;R++){e.domInserted(T[R].parentNode,T[R])}for(var R=0;R<P.length;R++){e.domRemoved(Q.target,P[R])}}},{childList:true,subtree:true})}console.log("[Packet] root view init.")}});var K=function(){};K.prototype.clean=function(){this.dom.data("__name__",null);for(var P in this){this[P]=null}};I.Plugin=function(R){if(R&&R.name&&R.name!==""){var P=new Function("dom","option","this.__name__='"+R.name+"';this.dom=dom;this.option=$.extend({},this.option,option);dom.data('"+R.name+"',this);this.init&&this.init(dom,option);");P.prototype=new K();for(var Q in R){P.prototype[Q]=R[Q]}$.fn[R.name]=function(S){if(this.data(R.name)&&this.data(R.name).singleton===true){return this.data(R.name)}else{var T=new P(this,S);this.data(R.name,T);return T}}}};I.Method=function(P){if(P&&P.name&&P.name!==""){$[P.name]=function(Q){if(v.isFunction(P.action)){return P.action(Q)}else{return null}}}};var r={};if(!window.Function.prototype.bind){window.Function.prototype.bind=function(S){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var R=Array.prototype.slice.call(arguments,1),Q=this;var T=function(){return Q.apply(this instanceof P?this:S,R.concat(Array.prototype.slice.call(arguments)))};var P=function(){};if(this.prototype){P.prototype=this.prototype}T.prototype=new P();return T}}I.overrideRequest=function(U){var S=e.factory.get("request");var Q=e.factory.get("view");var T=e.factory.get("viewgroup");var P=e.factory.get("root");for(var R in U){if(R!=="init"&&R!=="option"&&R!=="extend"){S.prototype[R]=U[R];Q.prototype[R]=U[R];T.prototype[R]=U[R];P.prototype[R]=U[R]}}};I.overrideView=function(T){var Q=e.factory.get("view");var S=e.factory.get("viewgroup");var P=e.factory.get("root");for(var R in T){if(R!=="init"&&R!=="option"&&R!=="extend"){Q.prototype[R]=T[R];S.prototype[R]=T[R];P.prototype[R]=T[R]}}};I.overrideViewGroup=function(R){var Q=e.factory.get("viewgroup");for(var P in R){if(P!=="init"&&P!=="option"&&P!=="extend"){Q.prototype[P]=R[P]}}};I.overrideRoot=function(R){var Q=e.factory.get("root");for(var P in R){if(P!=="init"&&P!=="option"&&P!=="extend"){Q.prototype[P]=R[P]}}};I.Option=function(S){if(!v.isString(S)){var V=S.option,U=[];if(S.extend){if(v.isString(S.extend)){U.push(S.extend)}else{U=S.extend}}for(var T=0;T<U.length;T++){var W=B.has(U[T]);if(W){I.extend(V,H.clone(W))}else{throw Error("[Packet ] can not find option with name of "+U[T])}}for(var T in S.override){var Y=T.split("."),P=V;for(var R=0;R<=Y.length-1;R++){var X=Y[R],Q=P[X];if(!v.isObject(Q)){P[X]={}}if(R===Y.length-1){P[X]=S.override[T]}else{P=P[X]}}}if(I.___info){S.name=(I.___info.packet?I.___info.packet+".":"")+S.name}B.add(S)}else{var W=B.has(S);if(W){return H.clone(W)}else{return null}}};I.Module=function(P){if(I.___info){P.packet=I.___info.packet}e.add(P)};I.override=function(P,Q){if(v.isString(P)){if(v.isObject(Q)){if(!r[P]){r[P]=I.extend(new M(),Q)}else{I.extend(r[P],Q)}}}};I.toggle=function(P){if(v.isString(P)){r[P]&&(c.prototype=r[P])}else{c.prototype=new M()}};I.global={};I.fn=M.prototype;window.packet=I;window.$=I})();